/*! cmsmasters-elementor-addon - v1.11.6 - 05-03-2024 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[8233],{2277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(e,t){this.bindElements.push([e,t])}onElementChange(e){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((t=>{let[n]=t;Array.isArray(n)||(n=n.split(/\s/));const[,s]=t;n.some((t=>{if(-1!==[t,`${t}_tablet`,`${t}_mobile`].indexOf(e))return s(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(e){const t=["desktop","tablet","mobile"],n=elementorFrontend.getCurrentDeviceMode(),s=this.getElementSettings();let i=t.indexOf(n);for(;i>0;){const n=s[e+"_"+t[i]];if(n&&"object"==typeof n&&Object.prototype.hasOwnProperty.call(n,"size")&&n.size)return n;i--}return s[e]}getCurrentDeviceSettingSize(e){let t=this.getCurrentDeviceSettingInherit(e);return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"size")&&(t=t.size),t}}t.default=_default},5898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.ViewModule{__construct(e){super.__construct(e),this.$element=e.widget,this.controls=e.controls,this.type=!!e.type&&e.type,"custom"===this.type&&(this.container=e.container?e.container:null,this.translateNames=e.translateNames?e.translateNames:[]),"document"===this.type&&(this.documents=e.documents?e.documents:{}),this.contentGap=44,this.elementorDocument="data-elementor-id",this.handles={}}getDefaultSettings(){const e="elementor-document-handle",t={handle:e,handleWrap:`${e}-wrapper`,handleInner:`${e}-inner`,handleTitle:`${e}__title`,widgetContainer:"elementor-widget-container",widgetTemplate:"cmsmasters-widget-template",parentDocument:"cmsmasters-parent-document",templateStyles:"cmsmasters-template-styles",editMode:"elementor-edit-mode"};return{classes:t,selectors:{handle:`.${t.handle}`,handleWrap:`.${t.handleWrap}`,handleInner:`.${t.handleInner}`,handleTitle:`.${t.handleTitle}`,widgetContainer:`> .${t.widgetContainer}`,editMode:`.${t.editMode}`}}}getDefaultElements(){if("document"===this.type)return;const{selectors:e}=this.getSettings(),t={$widgetContainer:this.$element.find(e.widgetContainer)};return this.container&&(t.$widgetContainer=this.container),t}onInit(){super.onInit(),this.createTemplateHandles()}createTemplateHandles(){switch(this.type){case"document":this.createControlDocumentHandles();break;case"listing":this.createControlTemplateHandles();break;case"custom":this.createRepeaterTemplateHandles();break;default:this.createWidgetTemplateHandles()}}createControlDocumentHandles(){const{classes:e,selectors:t}=this.getSettings();Object.values(this.documents).forEach((n=>{const s=n.$element;if(s.hasClass(e.editMode))return;if(s.children(t.handle).length)return;const i=jQuery("<div>",{class:e.handle}),a=s.data("elementor-title");i.append(this.getHandleInner(n,a)),s.prepend(i)}))}getHandleInner(e,t){const{classes:n}=this.getSettings(),s=jQuery("<i>",{class:"eicon-edit"}),i="document"!==this.type?cmsmastersElementorFrontend.translate(t):t,a=jQuery("<div>",{class:n.handleTitle}).text(cmsmastersElementorFrontend.translate("edit_element",[i]));return jQuery("<div>",{class:n.handleInner}).append(s,a).on("click",(()=>this.onDocumentHandleClick(e)))}createControlTemplateHandles(){const{classes:e,selectors:t}=this.getSettings(),n=this.elements.$widgetContainer.closest(".elementor").not(t.editMode);if(n.length&&n.data("elementor-id"))return;const s=jQuery("<div>",{class:e.handle});Object.entries(this.controls).forEach((t=>{let[n,i]=t;this.elements.$widgetContainer.addClass(e.handleWrap);const a=this.$element.find(`[${this.elementorDocument}=${i}]`).first();s.append(this.getHandleInner(a,n))})),this.elements.$widgetContainer.prepend(s)}createRepeaterTemplateHandles(){const{classes:e}=this.getSettings();Array.from(this.elements.$widgetContainer).forEach((t=>{const n=jQuery(t),s=jQuery("<div>",{class:e.handle}),i=n.find(`[${this.elementorDocument}]`).first();if(!i.length)return;const a=this.translateNames.indexOf(`saved_${i.data("elementor-type")}`);if(0>a)return;i.addClass(e.handleWrap);const l=this.translateNames[a];s.append(this.getHandleInner(i,l)),i.prepend(s)}))}createWidgetTemplateHandles(){const{classes:e,selectors:t}=this.getSettings(),n=this.elements.$widgetContainer.closest(".elementor").not(t.editMode);n.length&&n.data("elementor-id")||Object.entries(this.controls).forEach((t=>{let[n,s]=t;const i=jQuery("<div>",{class:e.handle});this.elements.$widgetContainer.addClass(e.handleWrap);const a=this.$element.find(`[${this.elementorDocument}=${s}]`).first();i.append(this.getHandleInner(a,n)),a.prepend(i)}))}onDocumentHandleClick(e){const t="document"!==this.type?e.data("elementor-id"):e.getSettings("id"),n=elementorCommon.api.run("editor/documents/switch",{id:t,mode:"autosave"});"document"!==this.type&&n.finally((()=>this.initModal(e)))}async initModal(e){const{classes:t}=this.getSettings(),n=e.data("elementor-id"),s=elementor.$previewContents.find(`[id=${t.templateStyles}-${n}]`),i=elementor.$previewContents.find(`.elementor-${n}`).first();if(this.modal)return void this.modal.setMessage(i).show();let a=e;this.container&&(a=this.$element);const l=a.closest(`.elementor:not(.elementor-${n})`);let o=`${t.widgetTemplate}-modal`,r=!1;l.length&&(r=l.data("elementor-id")),r&&(o+=` ${t.parentDocument}-${r}`),window.DialogsManager||await elementorFrontend.utils.assetsLoader.load("script","dialog"),this.modal=elementorFrontend.getDialogsManager().createWidget("lightbox",{id:`${t.widgetTemplate}-${n}`,className:o,closeButton:!0,closeButtonClass:"eicon-close",preventScroll:!0,hide:{onBackgroundClick:!0,onEscKeyPress:!0},position:{enable:!1}});const{widgetContent:d}=this.modal.getElements();"listing"!==this.type&&d.width(`${e.outerWidth()+this.contentGap}px`),this.modal.setMessage(i).show(),setTimeout((()=>{s.remove()}),1e3),this.modal.on("hide",(()=>{d.css("opacity",.5),setTimeout((()=>{this.modal.setMessage(""),r?elementorCommon.api.run("editor/documents/switch",{id:r,mode:"autosave"}).finally((()=>{this.createTemplateHandles(),elementor.dynamicTags.cleanCache(),setTimeout((()=>{this.modal.destroy(),jQuery(document).find(`[data-id=${this.$element.data("id")}]`).trigger("click")}),1e3)})):this.modal.destroy()}))}))}}t.default=_default},8633:(e,t,n)=>{var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(2277)),a=s(n(5898));class Template extends i.default{__construct(e){super.__construct(e),this.handles=null,this.templateControls=["template_id"]}onInit(){super.onInit(),this.initHandles()}initHandles(){if(!elementorFrontend.isEditMode())return;const e={};this.templateControls.forEach((t=>{const n=this.getElementSettings(t);if(!n)return!1;e[t]=n})),this.handles=new a.default({widget:this.$element,controls:e})}}t.default=Template}}]);