/*! cmsmasters-elementor-addon - v1.11.6 - 05-03-2024 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[3721],{2277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(e,t){this.bindElements.push([e,t])}onElementChange(e){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((t=>{let[s]=t;Array.isArray(s)||(s=s.split(/\s/));const[,a]=t;s.some((t=>{if(-1!==[t,`${t}_tablet`,`${t}_mobile`].indexOf(e))return a(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(e){const t=["desktop","tablet","mobile"],s=elementorFrontend.getCurrentDeviceMode(),a=this.getElementSettings();let i=t.indexOf(s);for(;i>0;){const s=a[e+"_"+t[i]];if(s&&"object"==typeof s&&Object.prototype.hasOwnProperty.call(s,"size")&&s.size)return s;i--}return a[e]}getCurrentDeviceSettingSize(e){let t=this.getCurrentDeviceSettingInherit(e);return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"size")&&(t=t.size),t}}t.default=_default},2649:(e,t,s)=>{var a=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(2277));class VideoPlayList extends i.default{__construct(e){super.__construct(e),this.YT=null}getDefaultSettings(){const e="elementor-widget-cmsmasters-video-playlist",t={widget:e,embedWrap:`${e}__embed-wrap`,activeItem:"active_item",canvasActive:"canvas_active",playersInitialized:"players-initialized",statusPlaying:"status_playing",statusPaused:"status_paused",statusFinished:"status_finished"};return{classes:t,selectors:{widget:`.${t.widget}`,canvas:`.${t.widget}__canvas`,canvasInner:`.${t.widget}__canvas_inner`,canvasCover:`.${t.widget}__canvas-cover`,canvasOverlay:`.${t.widget}__canvas-overlay`,item:`.${t.widget}__item`,itemStatus:`.${t.widget}__item-status`,itemTitle:`.${t.widget}__item-content-title`,container:`.${t.widget}__container`,counterVal:`.${t.widget}__counter-val`,playlistContainer:`.${t.widget}__list-items-content`,headingTitle:`.${t.widget}__heading-title`}}}getDefaultElements(){const{selectors:e}=this.getSettings();return{$canvas:this.findElement(e.canvas),$canvasInner:this.findElement(e.canvasInner),$canvasCover:this.findElement(e.canvasCover),$canvasOverlay:this.findElement(e.canvasOverlay),$item:this.findElement(e.item),$itemStatus:this.findElement(e.itemStatus),$container:this.findElement(e.container),$counterVal:this.findElement(e.counterVal),$playlistContainer:this.findElement(e.playlistContainer)}}onInit(){super.onInit(),elementorFrontend.utils.youtube.onApiReady(this.initPlayList.bind(this)),this.initPerfectScroll()}onYouTubeIframeAPIReady(){jQuery(document).trigger("onYouTubeIframeAPIReady",[YT])}initPlayList(){var e=this;void 0!==YT.Player?this.initPlaylistCb(YT):jQuery(document).on("onYouTubeIframeAPIReady",(function(){const t=arguments.length<=1?void 0:arguments[1];e.initPlaylistCb(t)}))}initPlaylistCb(e){const{classes:t,selectors:s}=this.getSettings();null===this.YT&&(this.YT=e);const a=this.elements.$container;if(a.hasClass(t.playersInitialized))return;a.addClass(t.playersInitialized),a.on("click",s.item,(e=>{this.onPlay(jQuery(e.currentTarget))}));const i=this.elements.$item.eq(0);this.elements.$canvasCover.on("click",(()=>{this.onPlay(i)})),""===this.getElementSettings("canvas_cover.id")&&this.onPlay(i),"yes"===this.getElementSettings("playlist_autoplay")&&this.onPlay(i)}onPlay(e){const{classes:t}=this.getSettings();this.elements.$container.find(this.elements.$canvasInner).parent().addClass(t.canvasActive),this.switchVideo(e)}switchVideo(e){const{classes:t}=this.getSettings(),s=e.closest(this.elements.$container).find(this.elements.$canvasOverlay),a=this.elements.$canvas,i=this.elements.$itemStatus,n=e.data("player"),l=e.data("provider");(a.hasClass(t.canvasActive)&&!i.hasClass(t.statusPlaying)||!a.hasClass(t.canvasActive))&&n&&(this.startNewPlayer(n,l),s.data({player:n,provider:l}));const r=s.data("player");a.hasClass(t.canvasActive)&&i.hasClass(t.statusPlaying)&&r&&this.pauseCurrentPlayer(r,s.data("provider"));const d=e.closest(this.elements.$container).find(this.elements.$counterVal);d.length&&d.html(e.data("video_index")+"/"),e.siblings().removeClass(t.activeItem),e.hasClass(t.activeItem)||e.addClass(t.activeItem);const o=e.data("id");let c=this.elements.$canvasOverlay.find("#embed_wrap_"+o);if(!c.length){this.elements.$canvasOverlay.children().remove(),c=jQuery('<div id="embed_wrap_'+o+'"></div>').appendTo(this.elements.$canvasOverlay);const s={id:o,currentPlayer:r,canvas:this.elements.$canvasOverlay,playerTarget:c};setTimeout((()=>{switch(l){case"youtube":s.height=e.data("height"),s.videoId=e.data("video_id"),this.initYouTubePlayer(e,s);break;case"vimeo":s.html=jQuery.parseJSON(e.data("html")),this.initVimeoPlayer(e,{id:o,canvas:this.elements.$canvasOverlay,currentPlayer:r,playerTarget:c,html:jQuery.parseJSON(e.data("html"))})}}),300),c.addClass(t.embedWrap)}c.addClass(t.activeItem).siblings().removeClass(t.activeItem),this.newHeadingTitle()}startNewPlayer(e,t){switch(t){case"youtube":setTimeout((()=>{e.playVideo()}),300);break;case"vimeo":e.play()}}pauseCurrentPlayer(e,t){switch(t){case"youtube":e.pauseVideo();break;case"vimeo":e.pause()}}initYouTubePlayer(e,t){const{classes:s,selectors:a}=this.getSettings(),i=this.getElementSettings(),n=jQuery('<div id="embed_'+t.id+'"></div>').appendTo(t.playerTarget);new YT.Player(n[0],{height:t.height,width:"100%",videoId:t.videoId,playerVars:{showinfo:0,rel:0},events:{onReady:a=>{e.data("player",a.target),(""!==i.canvas_cover.id||"yes"===i.playlist_autoplay||this.elements.$canvasOverlay.hasClass(s.canvasActive))&&a.target.playVideo(),"yes"===i.playlist_mute&&a.target.setVolume(0),t.canvas.data({player:a.target,provider:"youtube"})},onStateChange:i=>{const n=e.find(a.itemStatus);if(n.length)switch(i.data){case 0:n.removeClass(`${s.statusPlaying} ${s.statusPaused}`).addClass(s.statusFinished),this.ended(e);break;case 1:n.removeClass(`${s.statusPaused} ${s.statusFinished}`).addClass(s.statusPlaying),t.canvas.hasClass(s.canvasActive)||t.canvas.addClass(s.canvasActive);break;case 2:n.removeClass(`${s.statusPlaying} ${s.statusFinished}`).addClass(s.statusPaused)}}}})}initVimeoPlayer(e,t){const{classes:s,selectors:a}=this.getSettings(),i=jQuery(t.html).appendTo(t.playerTarget),n=new Vimeo.Player(i[0]);n.on("loaded",(function(){e.data("player",this),this.play(),t.canvas.data({player:this,provider:"vimeo"})})),"yes"===this.getElementSettings("playlist_mute")&&n.setVolume(0);const l=e.find(a.itemStatus);n.on("play",(()=>{l.length&&(l.removeClass(`${s.statusPaused} ${s.statusFinished}`).addClass(s.statusPlaying),t.canvas.hasClass(s.canvasActive)||t.canvas.addClass(s.canvasActive))})),n.on("pause",(()=>{l.length&&l.removeClass(`${s.statusPlaying} ${s.statusFinished}`).addClass(s.statusPaused)})),n.on("ended",(()=>{l.length&&(l.removeClass(`${s.statusPlaying} ${s.statusPaused}`).addClass(s.statusFinished),this.ended(e))}))}ended(e){const{selectors:t}=this.getSettings(),s=e.next(t.item),a=e.parent().children().eq(0),i=s.length?s:a;if(!e.is(i))if(e.index()+1===this.elements.$item.length&&"yes"!==this.getElementSettings("playlist_loop")){const t=e.closest(this.elements.$container).find(this.elements.$canvasOverlay),s=t.data("player");s&&this.pauseCurrentPlayer(s,t.data("provider"))}else this.switchVideo(i)}newHeadingTitle(){const{classes:e,selectors:t}=this.getSettings(),s=this.elements.$container,a=s.find(`${t.item}.${e.activeItem}`).find(t.itemTitle).text();""!==a&&s.find(t.headingTitle).text(a)}stopVideo(){const{classes:e}=this.getSettings(),t=this.elements.$canvas,s=this.elements.$canvasInner;t.hasClass(e.canvasActive)&&(t.removeClass(e.canvasActive),this.pauseCurrentPlayer(s.data("player"),s.data("provider")))}initPerfectScroll(){const e=this.elements.$playlistContainer.get(0);void 0!==e&&new PerfectScrollbar(e,{useBothWheelAxes:!0})}}t.default=VideoPlayList}}]);