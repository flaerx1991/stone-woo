/*! cmsmasters-elementor-addon - v1.11.6 - 05-03-2024 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[9286],{2999:(e,t,s)=>{var n=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(s(5246)),i=n(s(5898)),a=n(s(7537));const o=s(2363);class BlogFeatured extends r.default{__construct(){super.__construct(...arguments),this.handles=null,this.templateControls=["post_featured_template_id","post_regular_template_id"]}getDefaultSettings(){const e=super.getDefaultSettings(...arguments),t="cmsmasters-blog-featured";return jQuery.extend(e.selectors,{tempWrap:`.${t}-temp-wrap`,regularTemp:`.${t}-temp-regular`,featuredTemp:`.${t}-temp-featured`}),e}getDefaultElements(){const e=super.getDefaultElements(...arguments),{selectors:t}=this.getSettings();return Object.defineProperty(e,"$featuredTemp",{get:()=>this.findElement(t.featuredTemp)}),Object.defineProperty(e,"$regularTemp",{get:()=>this.findElement(t.regularTemp)}),Object.defineProperty(e,"$regularTempPosts",{get:()=>this.elements.$regularTemp.find(t.post)}),Object.defineProperty(e,"$featuredTempPosts",{get:()=>this.elements.$featuredTemp.find(t.post)}),Object.defineProperty(e,"$tempWrap",{get:()=>this.elements.$variable.find(t.tempWrap)}),e}bindEvents(){this.elements.$posts.length&&(super.bindEvents(),this.bindElementChange(["masonry_regular","post_regular_column","post_regular_space_x","post_regular_space_y"],o.debounce(this.initMasonry.bind(this))),this.bindElementChange(["template_bd","template_bd_width","template_layout","template_proportions","template_space_between"],this.initBorderColumnTemp.bind(this)),this.bindElementChange(["post_featured_bd_width_y","post_regular_bd_width_y","post_featured_column","post_regular_column","template_bd","template_layout","template_proportions","template_space_between"],this.initBorderColumn.bind(this)),this.bindElementChange(["post_featured_bd_width_x","post_regular_bd_width_x"],o.debounce(this.initBorderRow.bind(this))),this.on("ajaxInsertHTML:after",this.reLayout.bind(this)))}initAjaxWidget(){super.initAjaxWidget(),this.ajaxWidget.on("parameters",(e=>{this.ajaxMethod&&(e.data.ajax_vars.ajaxMethod=this.ajaxMethod)})),this.ajaxWidget.on("parameters/cache",(e=>{e.data.ajax_vars.ajaxMethod&&delete e.data.ajax_vars.ajaxMethod}))}ajaxInsertHTML(){const e=this.ajaxWidget.getResponseData(),t=this.getElementSettings("pagination_load_more_insert_in"),{selectors:s}=this.getSettings(),{selectors:n}=this.pagination.getSettings(),r=jQuery(e);"load-more"===this.ajaxMethod?t?this.elements.$regularTemp.append(r.find(s.regularTemp).contents()):this.elements.$tempWrap.append(r.find(s.tempWrap).contents()):super.ajaxInsertHTML(...arguments),this.pagination.elements.$root.replaceWith(r.filter(n.root))}onInit(){super.onInit(),this.initHandles()}initHandles(){if(!elementorFrontend.isEditMode())return;const e={};this.templateControls.forEach((t=>{const s=this.getElementSettings(t);if(!s)return!1;e[t]=s})),this.handles=new i.default({widget:this.$element,controls:e,type:"listing"})}initBorderColumnTemp(){new a.default({widget:this,$container:()=>this.elements.$tempWrap,$items:()=>this.elements.$tempWrap.find("> .cmsmasters-blog-featured-temp"),columns:()=>this.isVertical()?2:1,type:()=>this.getCurrentDeviceSetting("template_bd"),size:()=>this.getCurrentDeviceSettingSize("template_bd_width")})}isVertical(){return"vertical"===this.getCurrentDeviceSetting("template_layout")}initBorderColumn(){this.eachTemplate((e=>{const{name:t,$posts:s,$container:n}=e;new a.default({widget:this,$container:()=>n,$items:()=>s,columns:()=>this.getColumns(t),type:()=>this.getCurrentDeviceSetting("template_bd"),size:()=>this.getCurrentDeviceSettingSize(`post_${t}_bd_width_y`)})}))}eachTemplate(e){const t=this;[{name:"featured",get $container(){return t.elements.$featuredTemp},get $posts(){return t.elements.$featuredTempPosts}},{name:"regular",get $container(){return t.elements.$regularTemp},get $posts(){return t.elements.$regularTempPosts}}].forEach(e)}getColumns(e){return Number(this.getCurrentDeviceSetting(`post_${e}_column`))||1}initBorderRow(){const e=this.getElementSettings("template_bd");this.eachTemplate((t=>{const{name:s,$posts:n}=t,r=this.getCurrentDeviceSettingSize(`post_${s}_bd_width_x`),i=this.getColumns(s);n.removeClass("separator-vertical"),e&&r&&i&&n.filter(`:not(:nth-last-of-type(-n+${i}))`).addClass("separator-vertical")}))}reLayout(){super.reLayout(...arguments),this.initBorderColumnTemp(),this.initBorderColumn(),this.initBorderRow(),this.initMasonry()}initMasonry(){this.removeMasonry(),this.isMasonry()&&this.$element.imagesLoaded((()=>{const{$regularTemp:e}=this.elements;e.context=document.body,new elementorModules.utils.Masonry({container:e,items:this.elements.$regularTempPosts,columnsCount:this.getColumns("regular"),verticalSpaceBetween:this.getCurrentDeviceSettingSize("post_regular_space_y")}).run()}))}removeMasonry(){this.elements.$regularTempPosts.css({marginTop:""})}isMasonry(){const e=this.getColumns("regular");return this.elements.$regularTempPosts.length&&1<e&&Boolean(this.getElementSettings("masonry_regular"))}}t.default=BlogFeatured}}]);