/*! cmsmasters-elementor-addon - v1.11.6 - 05-03-2024 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[5802],{2277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(e,t){this.bindElements.push([e,t])}onElementChange(e){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((t=>{let[s]=t;Array.isArray(s)||(s=s.split(/\s/));const[,i]=t;s.some((t=>{if(-1!==[t,`${t}_tablet`,`${t}_mobile`].indexOf(e))return i(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(e){const t=["desktop","tablet","mobile"],s=elementorFrontend.getCurrentDeviceMode(),i=this.getElementSettings();let a=t.indexOf(s);for(;a>0;){const s=i[e+"_"+t[a]];if(s&&"object"==typeof s&&Object.prototype.hasOwnProperty.call(s,"size")&&s.size)return s;a--}return i[e]}getCurrentDeviceSettingSize(e){let t=this.getCurrentDeviceSettingInherit(e);return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"size")&&(t=t.size),t}}t.default=_default},2398:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class _default{constructor(){this.buffer={}}set(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.toID(e);this.buffer[i]=JSON.stringify(t,null,""),s&&setTimeout((()=>this.remove(i)),s)}toID(e){return"string"==typeof e?e:jQuery.param(e)}remove(e){const t=this.toID(e);return!!this.buffer[t]&&(this.buffer[t]=null,delete this.buffer[t],!0)}get(e){const t=this.toID(e);try{return JSON.parse(this.buffer[t])}catch(e){return this.buffer[t]||null}}}},7674:(e,t,s)=>{var i=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(s(2398));class _default extends elementorModules.ViewModule{__construct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.widget=e.widget,this.ajaxVarsDefault=e.ajaxVarsDefault||{},super.__construct(e)}getDefaultSettings(){this.cachingManager=new a.default;const e=super.getDefaultSettings(...arguments);return Object.assign(e,{classes:{loading:"--loading",animationLoading:"--loading-animation"},response:null,responseData:null,ajaxVars:this.cloneObj(this.ajaxVarsDefault),ajaxVarsSafe:this.cloneObj(this.ajaxVarsDefault),requestFree:!0,cacheAllow:!1,animationLoading:!0})}cloneObj(e){return JSON.parse(JSON.stringify(e))}request(){return new Promise(((e,t)=>{if(!this.isRequestFree())return;const s=this.isCacheAllow();this.setSettings("requestFree",!1);const i=this.getAjaxParameters();if(s){const t=this.getCache(i);if(t)return this.setSettings("responseData",t),this.responseSuccess(),e(t),void this.ajaxReset()}const a=jQuery.ajax(i);this.ajaxStart(),a.done((t=>{this.setSettings("response",t),this.setSettings("responseData",t.data),this.isValidResponse()?(s&&this.setCache(t.data),e(t.data),this.responseSuccess()):this.responseFail()})),a.fail((()=>{this.setSettings("response",a.responseJSON),a.responseJSON&&a.responseJSON.data&&this.setSettings("responseData",a.responseJSON.data),t(a),this.responseFail()})),a.always((()=>{this.ajaxReset(),this.ajaxFinish()}))}))}isRequestFree(){return this.getSettings("requestFree")}getAjaxParameters(){let e=this.widget.$element.data().documentId;e||(e=elementorFrontendConfig.post.id),e||(e=this.widget.$element.parents(".elementor[data-elementor-id]").data("elementor-id"));const t={url:elementorCmsmastersFrontendConfig.ajaxurl,type:"POST",dataType:"json",data:{_ajax_nonce:elementorCmsmastersFrontendConfig.nonces.ajax_widget,action:`ajax_widget_${this.widget.getWidgetType()}`,ajax_vars:this.getAjaxVars(),document_id:e,widget_id:this.widget.getID()}};if(elementorFrontend.isEditMode()){const e=elementorFrontend.config.elements.data[this.widget.getModelCID()];if(e){const s=e.toJSON({remove:["default","editSettings","defaultEditSettings"]});t.data.element_data={id:this.widget.getID(),elType:this.widget.getElementType(),widgetType:this.widget.getWidgetType(),elements:[],isInner:!1,settings:s}}}return this.trigger("parameters",t),t}getAjaxVars(){return this.getSettings("ajaxVars")}getCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.cachingManager.get(this.getCacheParameters(e))}getCacheParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||(e=this.getAjaxParameters()),e=this.cloneObj(e),delete e.data.element_data,this.trigger("parameters/cache",e),e}responseSuccess(){this.successQueryArgs(),this.trigger("response/success")}successQueryArgs(){this.setSettings("ajaxVarsSafe",this.cloneObj(this.getSettings("ajaxVars")))}ajaxReset(){this.setSettings("requestFree",!0),this.trigger("ajaxReset")}ajaxStart(){const{classes:e}=this.getSettings();this.widget.$element.addClass(e.loading),this.isAnimationLoading()&&this.widget.$element.addClass(e.animationLoading),this.trigger("ajaxReset")}isValidResponse(){const e=this.getResponse();return e&&e.success}getResponse(){return this.getSettings("response")}setCache(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cachingManager.set(this.getCacheParameters(t),e)}responseFail(){this.failureQueryArgs(),this.trigger("response/fail")}failureQueryArgs(){this.setSettings("ajaxVars",this.cloneObj(this.getSettings("ajaxVarsSafe")))}ajaxFinish(){const{classes:e}=this.getSettings();this.widget.$element.removeClass(e.loading),this.isAnimationLoading()&&this.widget.$element.removeClass(e.animationLoading)}setAjaxVars(e,t){return e=`.${e}`,this.setSettings(`ajaxVars${e}`,t)}getResponseData(){return this.getSettings("responseData")}isCacheAllow(){return Boolean(this.getSettings("cacheAllow"))}isAnimationLoading(){return Boolean(this.getSettings("animationLoading"))}}t.default=_default},6467:(e,t,s)=>{var i=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(s(7674)),r=i(s(2277));class Mailchimp extends r.default{getDefaultElements(){return{$form:this.findElement(".elementor-widget-cmsmasters-mailchimp__form"),$buttonText:this.findElement(".elementor-widget-cmsmasters-mailchimp__button-content"),$buttonIcon:this.findElement(".elementor-widget-cmsmasters-mailchimp__button-icon"),$buttonPreloader:this.findElement(".elementor-widget-cmsmasters-mailchimp__button-preloader"),$validMessage:this.findElement(".elementor-widget-cmsmasters-mailchimp__valid-message"),$errorMessage:this.findElement(".elementor-widget-cmsmasters-mailchimp__error-message"),$noticeMessage:this.findElement(".elementor-widget-cmsmasters-mailchimp__notice-message"),$checkBox:this.findElement(".elementor-widget-cmsmasters-mailchimp__check-box"),$button:this.findElement(".elementor-widget-cmsmasters-mailchimp__button")}}onInit(){super.onInit(this,arguments),this.initAjaxWidget(),this.checkedButton(),this.ajaxForm()}initAjaxWidget(){this.ajaxWidget=new a.default({cacheAllow:!0,widget:this})}checkedButton(){const e=this.getElementSettings();("subscribe"===e.action_form&&e.terms_use||"unsubscribe"===e.action_form&&e.confirmation_message)&&this.elements.$form.on("change",(()=>{this.elements.$checkBox.prop("checked")?this.elements.$button.attr("disabled",!1):this.elements.$button.attr("disabled",!0)}))}ajaxForm(){this.elements.$form.on("submit",(e=>{e.preventDefault(),this.ajaxWidget.isRequestFree()&&(this.ajaxWidget.setAjaxVars("fields",this.elements.$form.serialize()),this.elements.$validMessage.addClass("elementor-widget-cmsmasters-mailchimp__valid-hide"),this.elements.$validMessage.removeClass("elementor-widget-cmsmasters-mailchimp__valid-show"),this.elements.$errorMessage.addClass("elementor-widget-cmsmasters-mailchimp__error-hide"),this.elements.$errorMessage.removeClass("elementor-widget-cmsmasters-mailchimp__error-show"),this.elements.$buttonText.addClass("elementor-widget-cmsmasters-mailchimp__button-text-hide"),this.elements.$buttonPreloader.addClass("elementor-widget-cmsmasters-mailchimp__button-preloader-show"),this.ajaxWidget.request().then((()=>{const e=this.ajaxWidget.getResponseData();this.redirect(),this.hideForm(),e.message&&(this.elements.$validMessage.removeClass("elementor-widget-cmsmasters-mailchimp__valid-hide"),this.elements.$validMessage.addClass("elementor-widget-cmsmasters-mailchimp__valid-show"),this.elements.$validMessage.html(e.message))})).catch((()=>{const e=this.ajaxWidget.getResponseData();this.elements.$errorMessage.removeClass("elementor-widget-cmsmasters-mailchimp__error-hide"),this.elements.$errorMessage.addClass("elementor-widget-cmsmasters-mailchimp__error-show"),this.elements.$errorMessage.html(e.message_error)})).finally((()=>{const e=this.ajaxWidget.getResponseData();this.elements.$form.get(0).reset(),this.elements.$buttonText.removeClass("elementor-widget-cmsmasters-mailchimp__button-text-hide"),this.elements.$buttonPreloader.removeClass("elementor-widget-cmsmasters-mailchimp__button-preloader-show"),e.message_notice&&(this.elements.$errorMessage.removeClass("elementor-widget-cmsmasters-mailchimp__error-hide"),this.elements.$errorMessage.addClass("elementor-widget-cmsmasters-mailchimp__error-show"),this.elements.$errorMessage.html(e.message_notice))})))}))}redirect(){const e=this.getElementSettings();if(e.redirect){const t=e.redirect_url.url;window.location.href=t}}hideForm(){this.getElementSettings().hide_form&&this.elements.$form.addClass("elementor-widget-cmsmasters-mailchimp__hide-form")}}t.default=Mailchimp}}]);