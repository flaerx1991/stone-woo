/*! cmsmasters-elementor-addon - v1.11.6 - 05-03-2024 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[6243],{2277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(e,t){this.bindElements.push([e,t])}onElementChange(e){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((t=>{let[s]=t;Array.isArray(s)||(s=s.split(/\s/));const[,i]=t;s.some((t=>{if(-1!==[t,`${t}_tablet`,`${t}_mobile`].indexOf(e))return i(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(e){const t=["desktop","tablet","mobile"],s=elementorFrontend.getCurrentDeviceMode(),i=this.getElementSettings();let n=t.indexOf(s);for(;n>0;){const s=i[e+"_"+t[n]];if(s&&"object"==typeof s&&Object.prototype.hasOwnProperty.call(s,"size")&&s.size)return s;n--}return i[e]}getCurrentDeviceSettingSize(e){let t=this.getCurrentDeviceSettingInherit(e);return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"size")&&(t=t.size),t}}t.default=_default},5898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.ViewModule{__construct(e){super.__construct(e),this.$element=e.widget,this.controls=e.controls,this.type=!!e.type&&e.type,"custom"===this.type&&(this.container=e.container?e.container:null,this.translateNames=e.translateNames?e.translateNames:[]),"document"===this.type&&(this.documents=e.documents?e.documents:{}),this.contentGap=44,this.elementorDocument="data-elementor-id",this.handles={}}getDefaultSettings(){const e="elementor-document-handle",t={handle:e,handleWrap:`${e}-wrapper`,handleInner:`${e}-inner`,handleTitle:`${e}__title`,widgetContainer:"elementor-widget-container",widgetTemplate:"cmsmasters-widget-template",parentDocument:"cmsmasters-parent-document",templateStyles:"cmsmasters-template-styles",editMode:"elementor-edit-mode"};return{classes:t,selectors:{handle:`.${t.handle}`,handleWrap:`.${t.handleWrap}`,handleInner:`.${t.handleInner}`,handleTitle:`.${t.handleTitle}`,widgetContainer:`> .${t.widgetContainer}`,editMode:`.${t.editMode}`}}}getDefaultElements(){if("document"===this.type)return;const{selectors:e}=this.getSettings(),t={$widgetContainer:this.$element.find(e.widgetContainer)};return this.container&&(t.$widgetContainer=this.container),t}onInit(){super.onInit(),this.createTemplateHandles()}createTemplateHandles(){switch(this.type){case"document":this.createControlDocumentHandles();break;case"listing":this.createControlTemplateHandles();break;case"custom":this.createRepeaterTemplateHandles();break;default:this.createWidgetTemplateHandles()}}createControlDocumentHandles(){const{classes:e,selectors:t}=this.getSettings();Object.values(this.documents).forEach((s=>{const i=s.$element;if(i.hasClass(e.editMode))return;if(i.children(t.handle).length)return;const n=jQuery("<div>",{class:e.handle}),a=i.data("elementor-title");n.append(this.getHandleInner(s,a)),i.prepend(n)}))}getHandleInner(e,t){const{classes:s}=this.getSettings(),i=jQuery("<i>",{class:"eicon-edit"}),n="document"!==this.type?cmsmastersElementorFrontend.translate(t):t,a=jQuery("<div>",{class:s.handleTitle}).text(cmsmastersElementorFrontend.translate("edit_element",[n]));return jQuery("<div>",{class:s.handleInner}).append(i,a).on("click",(()=>this.onDocumentHandleClick(e)))}createControlTemplateHandles(){const{classes:e,selectors:t}=this.getSettings(),s=this.elements.$widgetContainer.closest(".elementor").not(t.editMode);if(s.length&&s.data("elementor-id"))return;const i=jQuery("<div>",{class:e.handle});Object.entries(this.controls).forEach((t=>{let[s,n]=t;this.elements.$widgetContainer.addClass(e.handleWrap);const a=this.$element.find(`[${this.elementorDocument}=${n}]`).first();i.append(this.getHandleInner(a,s))})),this.elements.$widgetContainer.prepend(i)}createRepeaterTemplateHandles(){const{classes:e}=this.getSettings();Array.from(this.elements.$widgetContainer).forEach((t=>{const s=jQuery(t),i=jQuery("<div>",{class:e.handle}),n=s.find(`[${this.elementorDocument}]`).first();if(!n.length)return;const a=this.translateNames.indexOf(`saved_${n.data("elementor-type")}`);if(0>a)return;n.addClass(e.handleWrap);const r=this.translateNames[a];i.append(this.getHandleInner(n,r)),n.prepend(i)}))}createWidgetTemplateHandles(){const{classes:e,selectors:t}=this.getSettings(),s=this.elements.$widgetContainer.closest(".elementor").not(t.editMode);s.length&&s.data("elementor-id")||Object.entries(this.controls).forEach((t=>{let[s,i]=t;const n=jQuery("<div>",{class:e.handle});this.elements.$widgetContainer.addClass(e.handleWrap);const a=this.$element.find(`[${this.elementorDocument}=${i}]`).first();n.append(this.getHandleInner(a,s)),a.prepend(n)}))}onDocumentHandleClick(e){const t="document"!==this.type?e.data("elementor-id"):e.getSettings("id"),s=elementorCommon.api.run("editor/documents/switch",{id:t,mode:"autosave"});"document"!==this.type&&s.finally((()=>this.initModal(e)))}async initModal(e){const{classes:t}=this.getSettings(),s=e.data("elementor-id"),i=elementor.$previewContents.find(`[id=${t.templateStyles}-${s}]`),n=elementor.$previewContents.find(`.elementor-${s}`).first();if(this.modal)return void this.modal.setMessage(n).show();let a=e;this.container&&(a=this.$element);const r=a.closest(`.elementor:not(.elementor-${s})`);let o=`${t.widgetTemplate}-modal`,l=!1;r.length&&(l=r.data("elementor-id")),l&&(o+=` ${t.parentDocument}-${l}`),window.DialogsManager||await elementorFrontend.utils.assetsLoader.load("script","dialog"),this.modal=elementorFrontend.getDialogsManager().createWidget("lightbox",{id:`${t.widgetTemplate}-${s}`,className:o,closeButton:!0,closeButtonClass:"eicon-close",preventScroll:!0,hide:{onBackgroundClick:!0,onEscKeyPress:!0},position:{enable:!1}});const{widgetContent:d}=this.modal.getElements();"listing"!==this.type&&d.width(`${e.outerWidth()+this.contentGap}px`),this.modal.setMessage(n).show(),setTimeout((()=>{i.remove()}),1e3),this.modal.on("hide",(()=>{d.css("opacity",.5),setTimeout((()=>{this.modal.setMessage(""),l?elementorCommon.api.run("editor/documents/switch",{id:l,mode:"autosave"}).finally((()=>{this.createTemplateHandles(),elementor.dynamicTags.cleanCache(),setTimeout((()=>{this.modal.destroy(),jQuery(document).find(`[data-id=${this.$element.data("id")}]`).trigger("click")}),1e3)})):this.modal.destroy()}))}))}}t.default=_default},2398:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class _default{constructor(){this.buffer={}}set(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.toID(e);this.buffer[i]=JSON.stringify(t,null,""),s&&setTimeout((()=>this.remove(i)),s)}toID(e){return"string"==typeof e?e:jQuery.param(e)}remove(e){const t=this.toID(e);return!!this.buffer[t]&&(this.buffer[t]=null,delete this.buffer[t],!0)}get(e){const t=this.toID(e);try{return JSON.parse(this.buffer[t])}catch(e){return this.buffer[t]||null}}}},7674:(e,t,s)=>{var i=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(2398));class _default extends elementorModules.ViewModule{__construct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.widget=e.widget,this.ajaxVarsDefault=e.ajaxVarsDefault||{},super.__construct(e)}getDefaultSettings(){this.cachingManager=new n.default;const e=super.getDefaultSettings(...arguments);return Object.assign(e,{classes:{loading:"--loading",animationLoading:"--loading-animation"},response:null,responseData:null,ajaxVars:this.cloneObj(this.ajaxVarsDefault),ajaxVarsSafe:this.cloneObj(this.ajaxVarsDefault),requestFree:!0,cacheAllow:!1,animationLoading:!0})}cloneObj(e){return JSON.parse(JSON.stringify(e))}request(){return new Promise(((e,t)=>{if(!this.isRequestFree())return;const s=this.isCacheAllow();this.setSettings("requestFree",!1);const i=this.getAjaxParameters();if(s){const t=this.getCache(i);if(t)return this.setSettings("responseData",t),this.responseSuccess(),e(t),void this.ajaxReset()}const n=jQuery.ajax(i);this.ajaxStart(),n.done((t=>{this.setSettings("response",t),this.setSettings("responseData",t.data),this.isValidResponse()?(s&&this.setCache(t.data),e(t.data),this.responseSuccess()):this.responseFail()})),n.fail((()=>{this.setSettings("response",n.responseJSON),n.responseJSON&&n.responseJSON.data&&this.setSettings("responseData",n.responseJSON.data),t(n),this.responseFail()})),n.always((()=>{this.ajaxReset(),this.ajaxFinish()}))}))}isRequestFree(){return this.getSettings("requestFree")}getAjaxParameters(){let e=this.widget.$element.data().documentId;e||(e=elementorFrontendConfig.post.id),e||(e=this.widget.$element.parents(".elementor[data-elementor-id]").data("elementor-id"));const t={url:elementorCmsmastersFrontendConfig.ajaxurl,type:"POST",dataType:"json",data:{_ajax_nonce:elementorCmsmastersFrontendConfig.nonces.ajax_widget,action:`ajax_widget_${this.widget.getWidgetType()}`,ajax_vars:this.getAjaxVars(),document_id:e,widget_id:this.widget.getID()}};if(elementorFrontend.isEditMode()){const e=elementorFrontend.config.elements.data[this.widget.getModelCID()];if(e){const s=e.toJSON({remove:["default","editSettings","defaultEditSettings"]});t.data.element_data={id:this.widget.getID(),elType:this.widget.getElementType(),widgetType:this.widget.getWidgetType(),elements:[],isInner:!1,settings:s}}}return this.trigger("parameters",t),t}getAjaxVars(){return this.getSettings("ajaxVars")}getCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.cachingManager.get(this.getCacheParameters(e))}getCacheParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||(e=this.getAjaxParameters()),e=this.cloneObj(e),delete e.data.element_data,this.trigger("parameters/cache",e),e}responseSuccess(){this.successQueryArgs(),this.trigger("response/success")}successQueryArgs(){this.setSettings("ajaxVarsSafe",this.cloneObj(this.getSettings("ajaxVars")))}ajaxReset(){this.setSettings("requestFree",!0),this.trigger("ajaxReset")}ajaxStart(){const{classes:e}=this.getSettings();this.widget.$element.addClass(e.loading),this.isAnimationLoading()&&this.widget.$element.addClass(e.animationLoading),this.trigger("ajaxReset")}isValidResponse(){const e=this.getResponse();return e&&e.success}getResponse(){return this.getSettings("response")}setCache(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cachingManager.set(this.getCacheParameters(t),e)}responseFail(){this.failureQueryArgs(),this.trigger("response/fail")}failureQueryArgs(){this.setSettings("ajaxVars",this.cloneObj(this.getSettings("ajaxVarsSafe")))}ajaxFinish(){const{classes:e}=this.getSettings();this.widget.$element.removeClass(e.loading),this.isAnimationLoading()&&this.widget.$element.removeClass(e.animationLoading)}setAjaxVars(e,t){return e=`.${e}`,this.setSettings(`ajaxVars${e}`,t)}getResponseData(){return this.getSettings("responseData")}isCacheAllow(){return Boolean(this.getSettings("cacheAllow"))}isAnimationLoading(){return Boolean(this.getSettings("animationLoading"))}}t.default=_default},7537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.ViewModule{__construct(){super.__construct(...arguments),this.isContainerGrid=!1}getDefaultSettings(){const e={columns:"cmsmasters-border-columns",wrap:"cmsmasters-border-columns-wrap"};return{widget:null,classes:e,selectors:{columns:`.${e.columns}`,wrap:`.${e.wrap}`},$items:null,$container:null,columns:null,type:()=>{const{widget:e}=this.getSettings();return e.getCurrentDeviceSetting("border_columns_type")},size:()=>{const{widget:e}=this.getSettings();return e.getCurrentDeviceSettingSize("border_vertical_width")}}}getDefaultElements(){const e=this.getSettings("selectors"),t={};return Object.defineProperty(t,"$container",{get:this.createMethodByType("$container")}),this.isContainerGrid="grid"===t.$container.css("display"),Object.defineProperty(t,"$items",{get:this.createMethodByType("$items")}),Object.defineProperty(t,"$columns",{get:()=>this.elements.$wrap.find("> "+e.columns)}),Object.defineProperty(t,"$wrap",{get:()=>this.elements.$container.find("> "+e.wrap)}),t}onInit(){super.onInit(),this.getColumns=(()=>{const e=this.createMethodByType("columns");return()=>e()||0})(),this.getType=this.createMethodByType("type"),this.getSize=this.createMethodByType("size"),this.update()}createMethodByType(e){const t=this.getSettings(e);return"function"==typeof t?t:()=>t}update(){this.clear();const e=this.getColumns(),t=this.getType(),s=this.getSize();if(1>=e||"none"===t||!t||0>=s)return this.clear(),!1;let i=e-1;if(this.elements.$items.length<=i&&(i=this.elements.$items.length-1),!this.elements.$columns.length||this.elements.$columns.length!==i){const{classes:e}=this.getSettings();this.elements.$wrap.length||jQuery("<div />").addClass(e.wrap).appendTo(this.elements.$container);const t=i-this.elements.$columns.length,s=jQuery("<div />");s.addClass(e.columns),0<t?[...Array(t)].forEach((()=>{s.clone().appendTo(this.elements.$wrap)})):this.elements.$columns.filter(`:nth-last-child(-n+${Math.abs(t)})`).remove()}if(this.elements.$columns.length){const t=this.elements.$items.get(1).getBoundingClientRect().left-this.elements.$items.get(0).getBoundingClientRect().right;let i="";i=this.isContainerGrid?this.elements.$container.css("grid-template-columns"):`repeat(${e}, minmax(0, 1fr))`,this.elements.$wrap.css({"grid-template-columns":i,"grid-column-gap":t+"px",left:`calc((${t}px + ${s}px) / 2)`})}}clear(){this.elements.$wrap.remove()}}t.default=_default},9945:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=s(2363);class Pagination extends elementorModules.ViewModule{__construct(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super.__construct(t),this.widget=e,this.pagedUrl=location.href}getDefaultSettings(){const e={linkLoadMore:"a.page-numbers.next",root:"ul.page-numbers",link:"a.page-numbers"},t=this.getPagedCurrent();return{selectors:e,paged:t,pagedSafe:t}}getDefaultElements(){const{selectors:e}=this.getSettings(),t=this;return{get $root(){return t.widget.findElement(e.root)},get $linkLoadMore(){return t.widget.findElement(e.linkLoadMore)}}}bindEvents(){const{selectors:e}=this.getSettings();this.widget.$element.off("click",e.link),this.widget.on("destroy:before",this.onDestroy.bind(this)),this.isShow()&&(this.isAjax()&&this.isPagination()||this.isLoadMore()||this.isInfiniteScroll())&&this.widget.$element.on("click",e.link,this.onClickLink.bind(this))}onInit(){super.onInit(),this.isInfiniteScroll()&&setTimeout(this.initInfiniteScroll.bind(this),150)}getPagedCurrent(){return this.getPagedByUrl(location.href)}isCurrentQuery(){const e=this.widget.getElementSettings("query_control_prefix");return"current_query"===this.widget.getElementSettings(`${e}_post_type`)}getPagedByUrl(e){const t=new URL(e);let s=1;if(this.isCurrentQuery()){const e=t.pathname.split("/");let i=e.findIndex((e=>"page"===e));i++,-1!==i&&e[i]&&(s=e[i])}else{s=new URLSearchParams(t.search).get(this.getPagedName())}return s=Math.max(1,Number(s)),s}getPagedName(){return`cmsmasters-page-${this.widget.getID()}`}isShow(){return this.widget.getElementSettings("pagination_show")}isAjax(){return this.isLoadMore()||this.isInfiniteScroll()||Boolean(this.widget.getElementSettings("pagination_via_ajax"))}isLoadMore(){return"load_more"===this.widget.getElementSettings("pagination_type")}isPagination(){return"pagination"===this.widget.getElementSettings("pagination_type")}isInfiniteScroll(){return"infinite_scroll"===this.widget.getElementSettings("pagination_type")}onClickLink(e){e.preventDefault();const t=this.getPagedByUrl(e.currentTarget.href);this.setPage(t),this.pagedUrl=e.currentTarget.href,this.trigger("click",t),this.isLoadMore()||this.isInfiniteScroll()||!this.widget.getElementSettings("pagination_scroll_into_view")||this.widget.$element.get(0).scrollIntoView({behavior:"smooth"})}setPage(e){this.setSettings("paged",e),this.updatePage(e)}updatePage(e){this.trigger("updatePage",e)}getPaged(){return Number(this.getSettings("paged"))}onSuccess(){this.pagedSafe(),this.saveState(),this.isInfiniteScroll()&&setTimeout((()=>{this.initInfiniteScroll(),this.waypoint&&this.waypoint.element.trigger("resize.waypoints")}),150)}pagedSafe(){this.setSettings("pagedSafe",this.getPaged())}saveState(){if(!this.isSaveState()||this.isLoadMore())return;const e=this.getPaged();if(this.isCurrentQuery()){const e=new URL(this.pagedUrl);history.replaceState({},"",e.pathname+e.search)}else i.saveParameters({[this.getPagedName()]:1<e&&e})}isSaveState(){return!elementorFrontend.isEditMode()&&Boolean(this.widget.getElementSettings("pagination_save_state"))}initInfiniteScroll(){this.isInfiniteScroll()&&!elementorFrontend.isEditMode()&&this.widget.$element.imagesLoaded((()=>{this.waypoint&&this.waypoint.destroy(),this.waypoint=new Waypoint({element:this.widget.elements.$variable,handler:e=>{"down"===e&&(this.waypoint.destroy(),this.elements.$linkLoadMore.trigger("click"))},offset:"bottom-in-view"})}))}onDestroy(){this.waypoint&&this.waypoint.destroy()}onFail(){this.setPage(this.getSettings("pagedSafe"))}}var n=Pagination;t.default=n},5246:(e,t,s)=>{var i=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(7674)),a=i(s(3207)),r=i(s(9945));const o=s(2363);class _default extends a.default{__construct(){super.__construct(...arguments),this.pagination=null,this.ajaxWidget=null,this.secondaryFilterScrollbar=null,this.mutationObserver=null,this.onPostResize=this.onPostResize.bind(this),this.onPostResizeDebounce=o.debounce(this.onPostResizeDebounce.bind(this)),this.onPostResizeOnce=this.onPostResizeOnce.bind(this),this.reLayoutDebounce=o.debounce(this.reLayoutDebounce.bind(this)),this.toggleFilterSecondaryEvent=this.toggleFilterSecondaryEvent.bind(this),this.elementChangeList=["typography_header_title_font_size","typography_header_filter_font_size","separator_filter_space_between","header_filter_padding"]}getDefaultSettings(){const e=super.getDefaultSettings(...arguments),t=e.classes.base;return e.classes=Object.assign(e.classes,{filter__secondaryVisible:`${t}-filter--nav-secondary-visible`,filter__secondaryHasItem:`${t}-filter--nav-secondary-has-item`,termLink:"term-link",termLinkActive:"term-link-active"}),e.selectors=Object.assign(e.selectors,{header:`.${t}-header`,filter:`.${t}-filter`,filterPrimary:`.${t}-filter-nav-primary`,filterSecondary:`.${t}-filter-nav-secondary`,filterSecondaryTrigger:`.${t}-filter-nav-secondary-trigger`,termLinkActive:`.${e.classes.termLinkActive}`}),e}getDefaultElements(){const e=super.getDefaultElements(...arguments),{selectors:t,classes:s}=this.getSettings();return e.$header=this.findElement(t.header),e.$filter=this.findElement(t.filter),e.$filterPrimary=this.findElement(t.filterPrimary),e.$filterPrimaryTermLinks=this.findElement(`${t.filterPrimary} .${s.termLink}`),e.$filterSecondary=this.findElement(t.filterSecondary),e.$filterSecondaryTrigger=this.findElement(t.filterSecondaryTrigger),e}bindEvents(){const{classes:e}=this.getSettings();this.bindElementChange(this.elementChangeList,this.filterFitItem.bind(this)),this.isFilter()&&(this.isFilterAjax()&&this.elements.$filter.on("click",`.${e.termLink}`,this.filterClick.bind(this)),this.elements.$filterSecondaryTrigger.on("click",this.secondaryTriggerClick.bind(this))),elementorFrontend.elements.$window.on("resize",this.onPostResizeDebounce),elementorFrontend.elements.$window.one("resize",this.onPostResizeOnce),this.on("widget-resize",this.onPostResize),this.on("ajaxInsertHTML:after",(()=>{this.elements.$posts.find(".elementor-element").each(((e,t)=>{elementorFrontend.elementsHandler.runReadyTrigger(t)}))})),this.observerConnect()}initElements(){super.initElements(...arguments),this.initPagination()}onInit(){super.onInit(),this.reLayout(),this.initAjaxWidget(),this.setCacheDefault()}isFilter(){return this.elements.$filter.length}isFilterAjax(){return Boolean(this.getElementSettings("header_filter_via_ajax"))}observerConnect(){this.elements.$variable.length&&(this.observerDisconnect(),this.mutationObserver||(this.mutationObserver=new MutationObserver(this.setCacheDefault.bind(this))),this.mutationObserver.observe(this.elements.$variable.get(0),{childList:!0,subtree:!0}))}observerDisconnect(){this.mutationObserver&&this.mutationObserver.disconnect(this.elements.$variable.get(0))}initPagination(){this.pagination=new r.default(this),this.pagination.on("updatePage",this.onUpdatePage.bind(this)),this.pagination.on("click",this.onPagination.bind(this))}reLayout(){this.filterFitItem()}filterFitItem(){const{$filterPrimaryTermLinks:e}=this.elements;if(!e.length)return;const{$filter:t,$filterSecondary:s}=this.elements,i=e.get(0).getBoundingClientRect(),{classes:n,selectors:a}=this.getSettings(),r=this.getFilterLinks().filter(a.termLinkActive);t.removeClass(n.filter__secondaryVisible),s.empty(),e.each(((e,t)=>{if(t.getBoundingClientRect().top>i.top){const e=jQuery(t).clone(!0);e.wrap("<li />").parent().appendTo(s),r.data("term-id")===e.data("term-id")&&e.addClass(n.termLinkActive)}}));const o=Boolean(s.children().length);o&&this.updateSecondaryFilterScrollbar(),t.toggleClass(n.filter__secondaryHasItem,o)}updateSecondaryFilterScrollbar(){const{$filterSecondary:e}=this.elements,t=e.get(0);if(void 0!==t){if(!this.secondaryFilterScrollbar)return void(this.secondaryFilterScrollbar=new PerfectScrollbar(t,{suppressScrollX:!0}));this.secondaryFilterScrollbar.update()}}initAjaxWidget(){this.ajaxWidget=new n.default({ajaxVarsDefault:this.getDefaultAjaxVars(),cacheAllow:!0,widget:this}),this.ajaxWidget.on("response/success",this.responseSuccess.bind(this)),this.ajaxWidget.on("response/fail",this.responseFail.bind(this))}getDefaultAjaxVars(){const e={query_vars:{paged:this.pagination.getPagedCurrent(),tax_query:[]}};if(this.isFilter()){const t=this.getFilterData();t&&(e.query_vars.tax_query=t)}return e}setCacheDefault(){let e=jQuery("<div />",{html:this.elements.$variable.html()});window.lazySizes&&e.find(`.${lazySizes.cfg.loadingClass}`).each(((e,t)=>{jQuery(t).removeClass(lazySizes.cfg.loadingClass).addClass(lazySizes.cfg.lazyClass)})),this.ajaxWidget.setCache(e.html())}toggleFilterSecondaryEvent(e){const{target:t}=e,{classes:s}=this.getSettings();this.elements.$filterSecondary.is(t)||jQuery.contains(this.elements.$filterSecondary.get(0),t)||(this.elements.$filter.removeClass(s.filter__secondaryVisible),elementorFrontend.elements.$document.off("click",this.toggleFilterSecondaryEvent))}secondaryTriggerClick(e){e.preventDefault();const{classes:t}=this.getSettings();this.elements.$filter.toggleClass(t.filter__secondaryVisible);return this.elements.$filter.hasClass(t.filter__secondaryVisible)?elementorFrontend.elements.$document.on("click",this.toggleFilterSecondaryEvent):elementorFrontend.elements.$document.off("click",this.toggleFilterSecondaryEvent),!1}filterClick(e){if(e.preventDefault(),!this.ajaxWidget.isRequestFree())return;this.ajaxMethod="filter";let t=jQuery(e.currentTarget);const{classes:s}=this.getSettings();if(t.hasClass(s.termLinkActive))return;this.pagination.setPage(1);const i=this.getFilterData(t);i?this.ajaxWidget.setAjaxVars("query_vars.tax_query",i):this.ajaxWidget.setAjaxVars("query_vars.tax_query",[]),this.ajaxWidget.request().then((()=>{setTimeout((()=>{this.elements.$filter.removeClass(s.filter__secondaryVisible)}),350);const e=this.getFilterLinks();if(t=e.filter(t),e.removeClass(s.termLinkActive),t.addClass(s.termLinkActive),this.isSaveState()){const e=`cmsmasters-filter-${this.getID()}`,s={[e]:!1};if(i){const i=t.data("termId"),n=t.data("taxonomy");i&&n&&(s[e]=`${n}|${i}`)}o.saveParameters(s)}})).catch((()=>{t.parent("li").remove(),this.filterFitItem()}))}isSaveState(){return!elementorFrontend.isEditMode()&&Boolean(this.getElementSettings("header_filter_save_state"))}getFilterLinks(){const{classes:e,selectors:t}=this.getSettings(),s=this.findElement(`${t.filterSecondary} .${e.termLink}`);return jQuery.merge(s,this.elements.$filterPrimaryTermLinks)}onPagination(){this.ajaxWidget.isRequestFree()&&(this.pagination.isLoadMore()||this.pagination.isInfiniteScroll()?this.ajaxMethod="load-more":this.ajaxMethod="pagination",this.ajaxWidget.request())}responseSuccess(){this.trigger("ajaxInsertHTML:before"),this.ajaxInsertHTML(),this.trigger("ajaxInsertHTML:after"),this.pagination.onSuccess()}responseFail(){this.pagination.onFail()}ajaxInsertHTML(){const e=this.ajaxWidget.getResponseData(),{selectors:t}=this.getSettings(),{selectors:s}=this.pagination.getSettings();if("load-more"===this.ajaxMethod){const i=jQuery(e),n=i.find(t.posts).contents();this.elements.$postsWrap.append(n),this.pagination.elements.$root.replaceWith(i.filter(s.root))}else this.elements.$variable.html(e)}reLayoutDebounce(){this.reLayout()}getFilterData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{classes:t}=this.getSettings();e&&e.length||(e=this.getFilterLinks().filter(((e,s)=>jQuery(s).hasClass(t.termLinkActive))));const s=e.data("termId"),i=e.data("taxonomy");return!(!s||!i)&&[{taxonomy:i,field:"term_id",terms:[s]}]}onPostResize(){this.reLayoutDebounce()}onPostResizeDebounce(){this.onPostResize(),elementorFrontend.elements.$window.one("resize",this.onPostResizeOnce)}onPostResizeOnce(){}onUpdatePage(e){this.ajaxWidget.isRequestFree()&&this.ajaxWidget.setAjaxVars("query_vars.paged",e)}unbindEvents(){elementorFrontend.elements.$window.off("resize",this.onPostResizeDebounce),elementorFrontend.elements.$window.off("resize",this.onPostResizeOnce),this.observerDisconnect()}}t.default=_default},3207:(e,t,s)=>{var i=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(2277));class _default extends n.default{getDefaultSettings(){const e="cmsmasters-blog",t={base:e,variable:`${e}__posts-variable`,posts:`${e}__posts`,post:`${e}__post`};return{classes:t,selectors:{variable:`.${t.variable}`,base:`.${t.base}`,posts:`.${t.posts}`,post:`.${t.post}`}}}getDefaultElements(){const{selectors:e}=this.getSettings(),t={$base:this.findElement(e.base),$variable:this.findElement(e.variable)};return Object.defineProperty(t,"$postsWrap",{get:()=>this.findElement(e.posts)}),Object.defineProperty(t,"$posts",{get:()=>this.findElement(e.post)}),t}}t.default=_default}}]);