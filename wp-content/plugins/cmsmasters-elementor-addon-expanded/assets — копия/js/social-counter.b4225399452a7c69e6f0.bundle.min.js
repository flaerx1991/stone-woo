/*! cmsmasters-elementor-addon - v1.11.6 - 05-03-2024 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[6322],{2277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(e,t){this.bindElements.push([e,t])}onElementChange(e){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((t=>{let[s]=t;Array.isArray(s)||(s=s.split(/\s/));const[,a]=t;s.some((t=>{if(-1!==[t,`${t}_tablet`,`${t}_mobile`].indexOf(e))return a(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(e){const t=["desktop","tablet","mobile"],s=elementorFrontend.getCurrentDeviceMode(),a=this.getElementSettings();let i=t.indexOf(s);for(;i>0;){const s=a[e+"_"+t[i]];if(s&&"object"==typeof s&&Object.prototype.hasOwnProperty.call(s,"size")&&s.size)return s;i--}return a[e]}getCurrentDeviceSettingSize(e){let t=this.getCurrentDeviceSettingInherit(e);return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"size")&&(t=t.size),t}}t.default=_default},2398:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class _default{constructor(){this.buffer={}}set(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=this.toID(e);this.buffer[a]=JSON.stringify(t,null,""),s&&setTimeout((()=>this.remove(a)),s)}toID(e){return"string"==typeof e?e:jQuery.param(e)}remove(e){const t=this.toID(e);return!!this.buffer[t]&&(this.buffer[t]=null,delete this.buffer[t],!0)}get(e){const t=this.toID(e);try{return JSON.parse(this.buffer[t])}catch(e){return this.buffer[t]||null}}}},7674:(e,t,s)=>{var a=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(2398));class _default extends elementorModules.ViewModule{__construct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.widget=e.widget,this.ajaxVarsDefault=e.ajaxVarsDefault||{},super.__construct(e)}getDefaultSettings(){this.cachingManager=new i.default;const e=super.getDefaultSettings(...arguments);return Object.assign(e,{classes:{loading:"--loading",animationLoading:"--loading-animation"},response:null,responseData:null,ajaxVars:this.cloneObj(this.ajaxVarsDefault),ajaxVarsSafe:this.cloneObj(this.ajaxVarsDefault),requestFree:!0,cacheAllow:!1,animationLoading:!0})}cloneObj(e){return JSON.parse(JSON.stringify(e))}request(){return new Promise(((e,t)=>{if(!this.isRequestFree())return;const s=this.isCacheAllow();this.setSettings("requestFree",!1);const a=this.getAjaxParameters();if(s){const t=this.getCache(a);if(t)return this.setSettings("responseData",t),this.responseSuccess(),e(t),void this.ajaxReset()}const i=jQuery.ajax(a);this.ajaxStart(),i.done((t=>{this.setSettings("response",t),this.setSettings("responseData",t.data),this.isValidResponse()?(s&&this.setCache(t.data),e(t.data),this.responseSuccess()):this.responseFail()})),i.fail((()=>{this.setSettings("response",i.responseJSON),i.responseJSON&&i.responseJSON.data&&this.setSettings("responseData",i.responseJSON.data),t(i),this.responseFail()})),i.always((()=>{this.ajaxReset(),this.ajaxFinish()}))}))}isRequestFree(){return this.getSettings("requestFree")}getAjaxParameters(){let e=this.widget.$element.data().documentId;e||(e=elementorFrontendConfig.post.id),e||(e=this.widget.$element.parents(".elementor[data-elementor-id]").data("elementor-id"));const t={url:elementorCmsmastersFrontendConfig.ajaxurl,type:"POST",dataType:"json",data:{_ajax_nonce:elementorCmsmastersFrontendConfig.nonces.ajax_widget,action:`ajax_widget_${this.widget.getWidgetType()}`,ajax_vars:this.getAjaxVars(),document_id:e,widget_id:this.widget.getID()}};if(elementorFrontend.isEditMode()){const e=elementorFrontend.config.elements.data[this.widget.getModelCID()];if(e){const s=e.toJSON({remove:["default","editSettings","defaultEditSettings"]});t.data.element_data={id:this.widget.getID(),elType:this.widget.getElementType(),widgetType:this.widget.getWidgetType(),elements:[],isInner:!1,settings:s}}}return this.trigger("parameters",t),t}getAjaxVars(){return this.getSettings("ajaxVars")}getCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.cachingManager.get(this.getCacheParameters(e))}getCacheParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||(e=this.getAjaxParameters()),e=this.cloneObj(e),delete e.data.element_data,this.trigger("parameters/cache",e),e}responseSuccess(){this.successQueryArgs(),this.trigger("response/success")}successQueryArgs(){this.setSettings("ajaxVarsSafe",this.cloneObj(this.getSettings("ajaxVars")))}ajaxReset(){this.setSettings("requestFree",!0),this.trigger("ajaxReset")}ajaxStart(){const{classes:e}=this.getSettings();this.widget.$element.addClass(e.loading),this.isAnimationLoading()&&this.widget.$element.addClass(e.animationLoading),this.trigger("ajaxReset")}isValidResponse(){const e=this.getResponse();return e&&e.success}getResponse(){return this.getSettings("response")}setCache(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cachingManager.set(this.getCacheParameters(t),e)}responseFail(){this.failureQueryArgs(),this.trigger("response/fail")}failureQueryArgs(){this.setSettings("ajaxVars",this.cloneObj(this.getSettings("ajaxVarsSafe")))}ajaxFinish(){const{classes:e}=this.getSettings();this.widget.$element.removeClass(e.loading),this.isAnimationLoading()&&this.widget.$element.removeClass(e.animationLoading)}setAjaxVars(e,t){return e=`.${e}`,this.setSettings(`ajaxVars${e}`,t)}getResponseData(){return this.getSettings("responseData")}isCacheAllow(){return Boolean(this.getSettings("cacheAllow"))}isAnimationLoading(){return Boolean(this.getSettings("animationLoading"))}}t.default=_default},3782:(e,t,s)=>{var a=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(2277)),n=a(s(7674));class SocialCounter extends i.default{getDefaultSettings(){return{selectors:{root:".cmsmasters-social-counter",item:".social-item",cacheFail:".social-item--cache-fail"},classes:{cacheExpire:"social-item--cache-expire",cacheEmpty:"social-item--cache-empty",cacheFail:"social-item--cache-fail"}}}getDefaultElements(){const{selectors:e}=this.getSettings();return{$root:this.findElement(e.root),$items:this.findElement(e.item)}}onInit(){this.findElement(".social-item--cache-fail").length&&(super.onInit(),this.initAjaxWidget(),this.eachItems())}initAjaxWidget(){this.ajaxWidget=new n.default({cacheAllow:!0,widget:this,animationLoading:!1})}eachItems(){const e=[],{selectors:t,classes:s}=this.getSettings();this.elements.$items.filter(t.cacheFail).each(((t,a)=>{const i=jQuery(a),{cacheId:n}=i.data();if(!i.hasClass(s.cacheFail)||!n)return;this.getItemsSame(n).addClass("--loading").removeClass(s.cacheFail),e.push(n)})),this.pasteAjaxCount(e)}getItemsSame(e){return jQuery(`[data-cache-id="${e}"]`)}pasteAjaxCount(e){e&&e.length&&this.ajaxWidget.isRequestFree()&&(this.ajaxWidget.setAjaxVars("items",e),this.ajaxWidget.request().then((t=>{if(!t)return;const{classes:s,selectors:a}=this.getSettings();e.forEach((e=>{const i=t[e],n=this.getItemsSame(e);i||0===i?n.find(".social-numbers span").text(i):!n.hasClass(a.cacheFail)||n.hasClass(s.cacheExpire)&&!n.hasClass(s.cacheEmpty)||n.remove(),n.removeClass("--loading").removeAttr("data-url-cache-id")}))})))}}t.default=SocialCounter}}]);