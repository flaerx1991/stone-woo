/*! cmsmasters-elementor-addon - v1.11.6 - 05-03-2024 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[6910],{2277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(e,t){this.bindElements.push([e,t])}onElementChange(e){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((t=>{let[s]=t;Array.isArray(s)||(s=s.split(/\s/));const[,i]=t;s.some((t=>{if(-1!==[t,`${t}_tablet`,`${t}_mobile`].indexOf(e))return i(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(e){const t=["desktop","tablet","mobile"],s=elementorFrontend.getCurrentDeviceMode(),i=this.getElementSettings();let r=t.indexOf(s);for(;r>0;){const s=i[e+"_"+t[r]];if(s&&"object"==typeof s&&Object.prototype.hasOwnProperty.call(s,"size")&&s.size)return s;r--}return i[e]}getCurrentDeviceSettingSize(e){let t=this.getCurrentDeviceSettingInherit(e);return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"size")&&(t=t.size),t}}t.default=_default},2398:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class _default{constructor(){this.buffer={}}set(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.toID(e);this.buffer[i]=JSON.stringify(t,null,""),s&&setTimeout((()=>this.remove(i)),s)}toID(e){return"string"==typeof e?e:jQuery.param(e)}remove(e){const t=this.toID(e);return!!this.buffer[t]&&(this.buffer[t]=null,delete this.buffer[t],!0)}get(e){const t=this.toID(e);try{return JSON.parse(this.buffer[t])}catch(e){return this.buffer[t]||null}}}},7674:(e,t,s)=>{var i=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(s(2398));class _default extends elementorModules.ViewModule{__construct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.widget=e.widget,this.ajaxVarsDefault=e.ajaxVarsDefault||{},super.__construct(e)}getDefaultSettings(){this.cachingManager=new r.default;const e=super.getDefaultSettings(...arguments);return Object.assign(e,{classes:{loading:"--loading",animationLoading:"--loading-animation"},response:null,responseData:null,ajaxVars:this.cloneObj(this.ajaxVarsDefault),ajaxVarsSafe:this.cloneObj(this.ajaxVarsDefault),requestFree:!0,cacheAllow:!1,animationLoading:!0})}cloneObj(e){return JSON.parse(JSON.stringify(e))}request(){return new Promise(((e,t)=>{if(!this.isRequestFree())return;const s=this.isCacheAllow();this.setSettings("requestFree",!1);const i=this.getAjaxParameters();if(s){const t=this.getCache(i);if(t)return this.setSettings("responseData",t),this.responseSuccess(),e(t),void this.ajaxReset()}const r=jQuery.ajax(i);this.ajaxStart(),r.done((t=>{this.setSettings("response",t),this.setSettings("responseData",t.data),this.isValidResponse()?(s&&this.setCache(t.data),e(t.data),this.responseSuccess()):this.responseFail()})),r.fail((()=>{this.setSettings("response",r.responseJSON),r.responseJSON&&r.responseJSON.data&&this.setSettings("responseData",r.responseJSON.data),t(r),this.responseFail()})),r.always((()=>{this.ajaxReset(),this.ajaxFinish()}))}))}isRequestFree(){return this.getSettings("requestFree")}getAjaxParameters(){let e=this.widget.$element.data().documentId;e||(e=elementorFrontendConfig.post.id),e||(e=this.widget.$element.parents(".elementor[data-elementor-id]").data("elementor-id"));const t={url:elementorCmsmastersFrontendConfig.ajaxurl,type:"POST",dataType:"json",data:{_ajax_nonce:elementorCmsmastersFrontendConfig.nonces.ajax_widget,action:`ajax_widget_${this.widget.getWidgetType()}`,ajax_vars:this.getAjaxVars(),document_id:e,widget_id:this.widget.getID()}};if(elementorFrontend.isEditMode()){const e=elementorFrontend.config.elements.data[this.widget.getModelCID()];if(e){const s=e.toJSON({remove:["default","editSettings","defaultEditSettings"]});t.data.element_data={id:this.widget.getID(),elType:this.widget.getElementType(),widgetType:this.widget.getWidgetType(),elements:[],isInner:!1,settings:s}}}return this.trigger("parameters",t),t}getAjaxVars(){return this.getSettings("ajaxVars")}getCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.cachingManager.get(this.getCacheParameters(e))}getCacheParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||(e=this.getAjaxParameters()),e=this.cloneObj(e),delete e.data.element_data,this.trigger("parameters/cache",e),e}responseSuccess(){this.successQueryArgs(),this.trigger("response/success")}successQueryArgs(){this.setSettings("ajaxVarsSafe",this.cloneObj(this.getSettings("ajaxVars")))}ajaxReset(){this.setSettings("requestFree",!0),this.trigger("ajaxReset")}ajaxStart(){const{classes:e}=this.getSettings();this.widget.$element.addClass(e.loading),this.isAnimationLoading()&&this.widget.$element.addClass(e.animationLoading),this.trigger("ajaxReset")}isValidResponse(){const e=this.getResponse();return e&&e.success}getResponse(){return this.getSettings("response")}setCache(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cachingManager.set(this.getCacheParameters(t),e)}responseFail(){this.failureQueryArgs(),this.trigger("response/fail")}failureQueryArgs(){this.setSettings("ajaxVars",this.cloneObj(this.getSettings("ajaxVarsSafe")))}ajaxFinish(){const{classes:e}=this.getSettings();this.widget.$element.removeClass(e.loading),this.isAnimationLoading()&&this.widget.$element.removeClass(e.animationLoading)}setAjaxVars(e,t){return e=`.${e}`,this.setSettings(`ajaxVars${e}`,t)}getResponseData(){return this.getSettings("responseData")}isCacheAllow(){return Boolean(this.getSettings("cacheAllow"))}isAnimationLoading(){return Boolean(this.getSettings("animationLoading"))}}t.default=_default},9594:(e,t,s)=>{var i=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(s(7674)),n=i(s(2277)),a=i(s(7143));const l=s(2363);class Instagram extends n.default{__construct(){this.sectionActivated=this.sectionActivated.bind(this),this.onResize=l.debounce(this.onResize.bind(this)),super.__construct(...arguments)}getDefaultSettings(){const e=".elementor-widget-cmsmasters-instagram",t="cmsmasters-instagram-lightbox__item";return{classes:{lightbox:{root:"cmsmasters-instagram-lightbox",loader:"cmsmasters-instagram-lightbox--loader",loaded:"cmsmasters-instagram-lightbox--loaded",item:t,itemMedia:`${t}__media`}},selectors:{widget:e,links:`${e}__link`}}}getDefaultElements(){const e=this.getSettings(),t=jQuery(`#${this.getLightBoxID()}`),s=t.find(".dialog-message > .cmsmasters-swiper-container");return{$item:this.findElement(`${e.selectors.widget}__item`),$loadMore:this.findElement(`${e.selectors.widget}__load-more-button`),$loadMoreWrap:this.findElement(`${e.selectors.widget}__load-more-button-wrapper`),$templateSlider:this.findElement(`#tmpl-${this.getWidgetType()}-${this.getID()}`),$wrapItems:this.findElement(`${e.selectors.widget}__items`),$wrapper:this.findElement(`${e.selectors.widget}__wrapper`),$links:this.findElement(e.selectors.links),$linksImages:this.findElement(`${e.selectors.widget}__image img`),lightbox:{$root:t,$swiperContainer:s,$slides:s.find("> .swiper-wrapper > .swiper-slide"),$item:t.find(`.${e.classes.lightbox.item}`),$itemContent:t.find(`.${e.classes.lightbox.item}__content`)}}}bindEvents(){super.bindEvents(...arguments),elementorFrontend.elements.$window.on("resize",this.onResize),this.bindElementChange("lightbox_sidebar_width",l.debounce(this.updatePerfectScroll.bind(this))),this.elements.$loadMore.on("click",this.onLoadMoreClick.bind(this)),this.elements.$wrapItems.on("click",".cmsmasters-instagram-lightbox-trigger",(e=>{e.preventDefault(),this.showLightbox(e.currentTarget.getAttribute("data-id"))})),this.bindElementChange(["skin","columns","masonry"],this.initMasonry.bind(this))}onInit(){super.onInit(),this.initAjaxWidget(),this.initMasonry(),this.onEdit()}onEdit(){elementorFrontend.isEditMode()&&elementor.channels.editor.on("section:activated",this.sectionActivated)}sectionActivated(e,t){const s=elementorFrontend.config.elements.data[this.getModelCID()],i=t.getOption("editedElementView");!s||this.lightbox&&this.lightbox.isVisible()||s.get("widgetType")!==i.model.get("widgetType")||-1===["section_lightbox_style","section_lightbox_comments_style"].indexOf(e)||this.elements.$links.eq(0).trigger("click")}updatePerfectScroll(){this.elements.lightbox.$itemContent.each(((e,t)=>{new PerfectScrollbar(t)}))}getColumns(){return Number(this.getCurrentDeviceSetting("columns"))}initAjaxWidget(){this.ajaxWidget=new r.default({widget:this,page:1})}getImgPlaceholder(){const e=this.getSettings();return jQuery("<div />",{class:`${e.classes.lightbox.item}__placeholder`})}getUrlByName(e){return`https://www.instagram.com/${e}`}getSlide(e){const t=this.getSettings(),s=this.getUserData(),i=jQuery("<div />",{class:"swiper-slide","data-id":e.id,"data-media-type":e.media_type,html:jQuery("<div />",{class:t.classes.lightbox.item,html:jQuery("<div />",{class:`${t.classes.lightbox.item}__inner`,html:[jQuery("<div />",{class:t.classes.lightbox.itemMedia,html:this.getImgPlaceholder()}),(()=>{if(this.getElementSettings("lightbox_side_style"))return jQuery("<div />",{class:`${t.classes.lightbox.item}__content`,html:jQuery("<div />",{class:`${t.classes.lightbox.item}__content__header`,html:[jQuery("<div />",{class:"cmsmasters-instagram-lightbox-profile",html:jQuery("<a />",{href:this.getUrlByName(s.username),title:s.name||s.username,html:[(()=>{if("user"===this.getElementSettings("search_for"))return jQuery("<img />",{src:s.profile_picture_url,class:"cmsmasters-instagram-lightbox-profile-picture",alt:s.name||s.username})})(),jQuery("<span />",{class:"cmsmasters-instagram-lightbox-profile-username",text:`@${s.username}`})]})}),(()=>{if(e.permalink)return jQuery("<div />",{class:"cmsmasters-instagram-lightbox-permalink",html:jQuery("<a />",{href:this.addLinks(e.permalink),target:"_blank",text:"Instagram"})})})(),(()=>{if(e.caption)return jQuery("<p />",{class:"cmsmasters-instagram-lightbox-caption",html:this.addLinks(this.checkLineBreaks(e.caption))})})()]})})})()]})})});return i.on("click",(e=>{e.stopPropagation()})),i}getUserData(){return this.elements.$wrapper.data("user-data")}async initSlider(){this.swiper||(window.Swiper||await elementorFrontend.utils.assetsLoader.load("script","swiper"),this.swiper=await new Swiper(this.elements.lightbox.$swiperContainer.get(0),{slidesPerView:1,allowTouchMove:!1,observer:!0,observeParents:!0,navigation:{nextEl:".elementor-swiper-button-next",prevEl:".elementor-swiper-button-prev"}}),setTimeout((()=>{this.swiper.on("slideChangeTransitionEnd",this.onSlideChange.bind(this)),this.swiper.on("slideChange",this.pauseMedia.bind(this))}),250))}showLightbox(e){this.initLightbox().then((()=>{setTimeout((async()=>{this.lightbox.show(),this.swiper||await this.initSlider();const t=jQuery(this.swiper.slides).filter(`[data-id="${e}"]`),s=t.find(this.elements.lightbox.$item).data("cmsmastersSlider"),i=t.index();this.swiper.slideToLoop(i,0),this.onSlideChange(),s&&s.swiper.slideToLoop(0,0)}))}))}getCurrentSlider(){return jQuery(this.swiper.slides).filter(".swiper-slide-active")}getCurrentSliderID(){return this.getCurrentSlider().data("id")}onSlideChange(){const e=this.getSettings(),t=this.getCurrentSliderItem(),s=this.getCurrentSlider();if(!t.hasClass(`${e.classes.lightbox.root}-image--loading`)&&!t.hasClass(`${e.classes.lightbox.root}-image--loaded`)){const onLoaded=()=>{t.addClass(`${e.classes.lightbox.root}-image--loaded`),t.removeClass(`${e.classes.lightbox.root}-image--loading`),t.find(`.${e.classes.lightbox.item}__placeholder`).remove()},i=this.getPostById(this.getCurrentSliderID()),r=this.getSlideViewHTML(i),{mediaType:n}=s.data();t.addClass(`${e.classes.lightbox.root}-image--loading`),t.find(`.${e.classes.lightbox.itemMedia}`).append(r),"CAROUSEL_ALBUM"===n?(this.initAlbumSliders(t),t.find("img").eq(0).on("load",onLoaded)):"IMAGE"===n?r.find("img").on("load",onLoaded):onLoaded()}if(this.isComments()){if(t.hasClass(e.classes.lightbox.loader)||t.hasClass(e.classes.lightbox.loaded))return;t.addClass(e.classes.lightbox.loader),this.getComments(this.getCurrentSliderID(),((s,i)=>{t.removeClass(e.classes.lightbox.loader),s||(t.addClass(e.classes.lightbox.loaded),i&&i.length&&t.find(this.elements.lightbox.$itemContent).append(i))}))}}initAlbumSliders(e){const t=new a.default({widget:this,$wrap:e});t.on("options",(e=>{e.observer=!0,e.observeParents=!0})),t.init(),setTimeout((()=>{t.swiper.on("slideChange",this.pauseMedia.bind(this))}),250)}getCurrentSliderItem(){return this.getCurrentSlider().find(this.elements.lightbox.$item)}getSlideViewHTML(e){const t=this.getSettings(),s=this.getUserData(),i=jQuery("<div />",{class:`${t.classes.lightbox.item}__view`});if("VIDEO"===e.media_type)i.append(jQuery("<video />",{src:e.video,controls:"controls"}));else if("CAROUSEL_ALBUM"===e.media_type){let t="";e.children.forEach((e=>{t+='<div class="swiper-slide">'+this.getSlideViewHTML(e)[0].outerHTML+"</div>"})),i.append(this.elements.$templateSlider.html().replace(/{{SLIDES}}/g,t))}else{const t={src:e.media_url};s&&s.name?t.alt=s.name:t.alt=cmsmastersElementorFrontend.config.i18n.instagram.img_alt_text;const r=jQuery("<img />",t);i.append(r)}return i}getPost(e){const{post:t}=e.data();return t.id=e.data("id"),t.permalink=e.attr("href"),t.media_url=e.find(this.elements.$linksImages).attr("src"),t}getPostById(e){const t=this.elements.$links.filter(`[data-id="${e}"]`);return this.getPost(t)}updateLightboxSlider(){this.swiper&&this.elements.$links.each(((e,t)=>{const s=jQuery(t),i=this.elements.lightbox.$slides.filter(`[data-id="${s.data("id")}"]`),r=this.getPost(s);i.length||this.swiper.appendSlide(this.getSlide(r))}))}appendLightboxSlider(){const e=jQuery("<div />",{class:"swiper-wrapper"});this.elements.$links.each(((t,s)=>{const i=jQuery(s),r=this.getPost(i);e.append(this.getSlide(r))}));const t=jQuery("<div />",{class:"swiper swiper-container cmsmasters-swiper-container"});t.append(e);const s=jQuery("<div />",{class:"elementor-swiper-button elementor-swiper-button-prev elementor-lightbox-prevent-close",html:'<i class="eicon-chevron-left"></i>'}),i=jQuery("<div />",{class:"elementor-swiper-button elementor-swiper-button-next elementor-lightbox-prevent-close",html:'<i class="eicon-chevron-right"></i>'});jQuery.merge(s,i).on("click",(e=>{e.stopPropagation()})),t.append(s).append(i),this.lightbox.setMessage(t)}getLightBoxID(){return`cmsmasters-instagram-${this.getID()}`}async initLightbox(){if(this.lightbox)return;const e=this.getSettings();window.DialogsManager||await elementorFrontend.utils.assetsLoader.load("script","dialog"),this.lightbox=elementorFrontend.getDialogsManager().createWidget("lightbox",{id:this.getLightBoxID(),className:`${e.classes.lightbox.root} elementor-lightbox`,closeButton:!0,closeButtonClass:"eicon-close",hide:{onClick:!0}});const onShow=async()=>{this.appendLightboxSlider(),this.initElements(),await this.initSlider(),this.updatePerfectScroll(),this.lightbox.off("show",onShow)};this.lightbox.on("show",onShow),this.lightbox.on("hide",this.pauseMedia.bind(this))}pauseMedia(){this.lightbox.getElements().widget.find("video, audio").each(((e,t)=>{t.pause()}))}onLoadMoreClick(e){if(e.preventDefault(),!this.ajaxWidget.isRequestFree())return;const t=Number(this.elements.$loadMore.attr("data-page"));this.ajaxWidget.setAjaxVars("page",t),this.ajaxWidget.request().then((()=>{const e=this.ajaxWidget.getResponseData(),t=jQuery(e.html);this.elements.$wrapItems.append(t),this.elements.$loadMore.attr("data-page",e.page),e.page>=e.max_num_pages&&this.elements.$loadMoreWrap.remove(),this.initElements(),this.updateLightboxSlider(),this.initElements(),this.updatePerfectScroll(),this.initMasonry()}))}getAccessToken(){return this.getElementSettings("custom_connection")?this.getElementSettings("access_token"):elementorCmsmastersFrontendConfig.instagram_access_token}getAccountType(){return this.getElementSettings("custom_connection")&&this.getElementSettings("account_type")?this.getElementSettings("account_type"):elementorCmsmastersFrontendConfig.instagram_account_type}addLinks(e){let t=e.replace(/(#[^\s,\.#]+)/g,this.replaceHashtags.bind(this));return t=t.replace(/[@]+[A-Za-z0-9-_\."<]+/g,this.replaceMention.bind(this)),t}checkLineBreaks(e){return e.replace(/\n/g,"<br>")}replaceHashtags(e){return this.getContentLink(e,`https://www.instagram.com/explore/tags/${e.trim().substring(1)}`)}replaceMention(e){return this.getContentLink(e,`https://www.instagram.com/${e.trim().substring(1)}`)}getContentLink(e,t){return jQuery("<a />",{class:"content-link",target:"_blank",rel:"nofollow noopener",text:e,href:t}).get(0).outerHTML}removeMasonry(){this.elements.$item.css({marginTop:""})}initMasonry(){if(this.removeMasonry(),!this.isMasonry())return;const e=new elementorModules.utils.Masonry({container:this.elements.$wrapItems,items:this.elements.$item,columnsCount:this.getColumns(),verticalSpaceBetween:this.getRowGap()});this.$element.imagesLoaded().always((()=>{this.removeMasonry(),e.run()}))}getRowGap(){return parseFloat(getComputedStyle(this.$element.get(0)).getPropertyValue("--gap-row"))}getCommentsHtml(e){const t=jQuery("<ul />",{class:"cmsmasters-instagram-lightbox__comments-box"});return e.forEach((e=>{t.append(this.getCommentHtml(e))})),t}getComments(e,t){const s=`https://graph.facebook.com/${e}/comments?fields=text,username,replies{username,text}&access_token=${this.getAccessToken()}`;jQuery.ajax({url:s,data:"json",success:e=>{e&&e.data.length?t(null,this.getCommentsHtml(e.data)):t(null,[])},error:e=>{t(e)}})}getCommentHtml(e){const t=jQuery("<li />",{class:"cmsmasters-instagram-lightbox-comment"}),s=jQuery("<div />",{class:"cmsmasters-instagram-lightbox-comment__header"});return s.append(jQuery("<a />",{class:"cmsmasters-instagram-lightbox-commenter",href:this.getUrlByName(e.username),target:"_blank",rel:"noopener",text:e.username})),s.append(jQuery("<span />",{class:"cmsmasters-instagram-lightbox-comment-text",html:this.addLinks(this.checkLineBreaks(e.text))})),t.append(s),e.replies&&e.replies.data.length&&(e.replies.data.reverse(),t.append(this.getCommentsHtml(e.replies.data))),t}isComments(){return"business"===this.getAccountType()&&"user"===this.getElementSettings("search_for")}isMasonry(){return Boolean(this.getElementSettings("masonry"))&&1<this.getColumns()&&this.elements.$item.length}onResize(){this.initMasonry()}onDestroy(){super.onDestroy(...arguments),this.swiper&&this.swiper.destroy(),this.lightbox&&this.lightbox.destroy(),elementorFrontend.elements.$window.off("resize",this.onResize),elementor.channels.editor.off("section:activated",this.sectionActivated)}}t.default=Instagram},7143:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=s(2363);class _default extends elementorModules.ViewModule{__construct(e){super.__construct(...arguments),this.cacheHTML=null,this.swiper=null,this.widget=e.widget,this.$wrap=e.$wrap||this.widget.$element,this.reInitDebounce=i.debounce(this.reInit.bind(this),50),this.classesTemplates={},this.setSettingsPrefix(),this.setClassesTemplates(),this.bindEventsControls(),this.widget.on("destroy:before",this.destroy.bind(this))}getDefaultSettings(){const e="swiper-pagination",t="swiper-button";return{classes:{bullets:`${e}-bullets`,bulletsDynamic:`${e}-bullets-dynamic`},selectors:{arrowNext:`.${t}-next`,arrowPrev:`.${t}-prev`,bullet:`.${e}-bullet`,container:".cmsmasters-swiper-container",pagination:`.${e}`,root:".cmsmasters-slider",scrollbar:".swiper-scrollbar",slides:".swiper-slide",wrapper:".swiper-wrapper"}}}getDefaultElements(){const{selectors:e}=this.getSettings(),t=this.$wrap.find(e.root),s=t.find(e.pagination),i={$arrowNext:t.find(e.arrowNext),$arrowPrev:t.find(e.arrowPrev),$container:t.find(e.container),$pagination:s,$root:t,$scrollbar:t.find(e.scrollbar),$slides:t.find(e.slides),$wrapper:t.find(e.wrapper)};return Object.defineProperty(i,"$bullet",{get:()=>this.elements.$pagination.find(e.bullet)}),this.trigger("defaultElements",i),i}bindEventsControls(){this.widget.bindElementChange(["slider_arrows","slider_autoplay_reverse","slider_autoplay_speed","slider_autoplay","slider_bullets_container_direction","slider_bullets_type","slider_centered_slides","slider_direction","slider_effect","slider_free_mode","slider_height_type","slider_infinite","slider_mousewheel","slider_navigation","slider_pagination_container_direction","slider_pause_on_hover","slider_per_view","slider_scrollbar_visible","slider_scrollbar","slider_space_between","slider_speed","slider_to_scroll","slider_type"].map(this.getPrefixControl.bind(this)),(()=>{this.swiper&&this.widget.$element.data("initialSlide",this.swiper.realIndex),this.reInitDebounce()})),this.widget.bindElementChange(this.getPrefixControl("slider_slide_index"),(()=>{this.widget.$element.removeData("initialSlide"),this.reInitDebounce()})),this.widget.bindElementChange(Object.keys(this.classesTemplates),i.debounce(this.addGeneratedClass.bind(this),10)),this.widget.bindElementChange([this.getPrefixControl("slider_width"),this.getPrefixControl("slider_height"),this.getPrefixControl("slider_padding")],i.debounce(this.update.bind(this),100)),this.widget.bindElementChange([this.getPrefixControl("slider_centered_slides_width")],this.update.bind(this))}onInit(){super.onInit(),this.elements.$root.addClass("cmsmasters-slider--init"),this.setCacheHTML()}setSettingsPrefix(){const e=this.widget.$element.attr("data-widget_type"),[,t]=e.split(".");let s="";"default"!==t&&(s=`${t}_`),this.settingsPrefix=s}setClassesTemplates(){const e="cmsmasters-slider",t={slider_arrows_align_position:`${e}--position-arrows-{{VALUE}}`,slider_arrows_text_dir:`${e}--text-dir-arrows-{{VALUE}}`,slider_arrows:`${e}--arrows`,slider_bullets_type:`${e}--bullets-{{VALUE}}`,slider_direction:`${e}--dir-{{VALUE}}`,slider_effect:`${e}--effect-{{VALUE}}`,slider_navigation:`${e}--nav ${e}--nav-{{VALUE}}`,slider_per_view:`${e}-per-view-{{VALUE}}`,slider_progressbar_circle:`${e}--progressbar-{{VALUE}}`,slider_scrollbar_circle:`${e}--scrollbar-{{VALUE}}`,slider_scrollbar:`${e}--scrollbar`,slider_arrows_visibility:`${e}--visibility-arrows-{{VALUE}}`};for(const e in t)this.classesTemplates[this.getPrefixControl(e)]=t[e]}getPrefixControl(e){return this.settingsPrefix+e}reInit(){this.swiper&&(this.cacheHTML&&(this.elements.$root.html(this.cacheHTML),this.initElements()),this.init())}async init(){if(!this.elements.$root.length)return;this.swiper&&this.destroy();const e=elementorFrontend.utils.swiper;this.addGeneratedClasses(),this.swiper=await new e(this.elements.$container,this.getSliderOptions()),this.initLazyLoad(),this.widget.getElementSettings(this.getPrefixControl("slider_pause_on_hover"))&&this.elements.$container.hover((()=>{this.swiper.autoplay.stop()}),(()=>{this.swiper.autoplay.start()})),this.elements.$container.data("swiper",this.swiper),this.$wrap.data("cmsmastersSlider",this),this.swiper.on("beforeLoopFix",(function(){window.lazySizes&&this.$el.find(`.${lazySizes.cfg.loadingClass}`).each(((e,t)=>{jQuery(t).removeClass(lazySizes.cfg.loadingClass).addClass(lazySizes.cfg.lazyClass)}))}))}addGeneratedClasses(){for(const e in this.classesTemplates)this.addGeneratedClass(e)}addGeneratedClass(e){const t=this.classesTemplates[e];if(!t)return;const s=/{{VALUE}}$/g,i=this.widget.getCurrentDeviceSetting(e),r=t.replace(s,"");let n=this.elements.$root.attr("class").replace(new RegExp(`${r}(\\S|$|)+`,"g"),"");if(i||0===i){n+=` ${t.replace(s,i||"")}`}n=n.replace(/\s\s+/g," ").trim(),this.elements.$root.attr("class",n)}getSliderSettings(e){return this.widget.getElementSettings(this.getPrefixControl(e))}getSliderOptions(){const{selectors:e}=this.getSettings(),t=this.getEffect();let s=this.getSliderSettings("slider_per_view")||1;s=this.isHorizontal()&&"fade"!==t&&"flip"!==t?"auto"===s?s:Number(s):1;const i=elementorFrontend.config.responsive.activeBreakpoints,r=(()=>{const e={desktop:this.widget.getCurrentDeviceSettingSize(this.getPrefixControl("slider_space_between")),tablet:this.widget.getCurrentDeviceSettingSize(this.getPrefixControl("slider_space_between_tablet")),mobile:this.widget.getCurrentDeviceSettingSize(this.getPrefixControl("slider_space_between_mobile"))};for(const t in e)"number"!=typeof e[t]&&(e[t]=20);return e})(),n={autoHeight:this.isHeightAuto(),breakpoints:{},centeredSlides:Boolean(this.getSliderSettings("slider_centered_slides")),direction:this.getSliderSettings("slider_direction"),effect:t,grabCursor:!0,freeMode:Boolean(this.getSliderSettings("slider_free_mode")),initialSlide:this.getInitialSlide(),loop:Boolean(this.getSliderSettings("slider_infinite")),mousewheel:Boolean(this.getSliderSettings("slider_mousewheel")),roundLengths:!0,slidesPerView:s,spaceBetween:r.desktop,speed:this.getSliderSettings("slider_speed"),handleElementorBreakpoints:!0,watchSlidesVisibility:!0,onInit:()=>{window.lazySizes&&lazySizes.init()}};if("cube"!==t){const e={mobile:i.mobile.value,tablet:i.tablet.value},t=this.getSliderSettings("slider_to_scroll")||1;for(const s in e){const i=Number(this.widget.getCurrentDeviceSetting(`slider_per_view_${s}`))||1;n.breakpoints[e[s]]={slidesPerGroup:Number(t),slidesPerView:i<t?Math.min(i,t):i,spaceBetween:r[s]}}}if(this.getSliderSettings("slider_autoplay")?n.autoplay={delay:this.getSliderSettings("slider_autoplay_speed")||5e3,reverseDirection:this.getSliderSettings("slider_autoplay_reverse"),disableOnInteraction:!1}:n.autoplay=!1,this.getSliderSettings("slider_arrows")&&(n.navigation={nextEl:this.$wrap.find(e.arrowNext).get(0),prevEl:this.$wrap.find(e.arrowPrev).get(0)}),this.isEnablePagination()){if(n.pagination={clickable:!0,el:this.$wrap.find(e.pagination).get(0),type:this.getSliderSettings("slider_navigation")},"bullets"===this.getSliderSettings("slider_navigation"))switch(this.getSliderSettings("slider_bullets_type")){case"dynamic":n.pagination.dynamicBullets=!0;break;case"numbered":n.pagination.renderBullet=(e,t)=>`<span class="${t}">${e+1}</span>`}}else this.isEnableScrollbar()&&(n.scrollbar={draggable:!0,el:e.scrollbar,hide:!this.getSliderSettings("slider_scrollbar_visible")});return"fade"===t&&(n.fadeEffect={crossFade:!0}),1!==s&&(n.slidesPerGroup=Math.min(+this.getSliderSettings("slider_to_scroll")||1,s)),n.loop&&(n.loopedSlides=this.elements.$slides.length),this.trigger("options",n),n}initLazyLoad(){window.lazySizes&&this.elements.$slides.find("img").on("lazyloaded",(()=>{this.swiper.update()}))}isHorizontal(){return"horizontal"===this.getSliderSettings("slider_direction")}getEffect(){return"coverflow"===this.widget.getElementSettings(this.getPrefixControl("slider_type"))?"coverflow":this.widget.getElementSettings(this.getPrefixControl("slider_effect"))}isHeightAuto(){return"auto"===this.getSliderSettings("slider_height_type")}getInitialSlide(){let e=this.widget.$element.data("initialSlide");return e||(e=this.getSliderIndex()||0),e}getSliderIndex(){const e=this.getSliderSettings("slider_slide_index");return e?e-1:0}isEnablePagination(){return this.getSliderSettings("slider_navigation")}isEnableScrollbar(){return Boolean(this.getSliderSettings("slider_scrollbar"))}update(){this.swiper&&this.swiper.update()}setCacheHTML(){const e=jQuery("<div />",{html:this.elements.$root.html()});this.cacheHTML=e.html()}getAllSlides(){return jQuery(this.swiper.slides)}getCurrentSlide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.getAllSlides().eq(this.swiper.activeIndex);return e?t.find(e):t}destroy(){this.swiper&&(this.widget.$element.data("initialSlide",this.swiper.realIndex),this.swiper.destroy())}}t.default=_default}}]);