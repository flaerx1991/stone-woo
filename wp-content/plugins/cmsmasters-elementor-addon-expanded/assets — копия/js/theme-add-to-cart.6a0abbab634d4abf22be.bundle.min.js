/*! cmsmasters-elementor-addon - v1.11.6 - 05-03-2024 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[2748],{2277:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(t,e){this.bindElements.push([t,e])}onElementChange(t){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((e=>{let[n]=e;Array.isArray(n)||(n=n.split(/\s/));const[,s]=e;n.some((e=>{if(-1!==[e,`${e}_tablet`,`${e}_mobile`].indexOf(t))return s(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(t){const e=["desktop","tablet","mobile"],n=elementorFrontend.getCurrentDeviceMode(),s=this.getElementSettings();let i=e.indexOf(n);for(;i>0;){const n=s[t+"_"+e[i]];if(n&&"object"==typeof n&&Object.prototype.hasOwnProperty.call(n,"size")&&n.size)return n;i--}return s[t]}getCurrentDeviceSettingSize(t){let e=this.getCurrentDeviceSettingInherit(t);return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"size")&&(e=e.size),e}}e.default=_default},4826:(t,e,n)=>{var s=n(3203);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n(2277));class ThemeAddToCart extends i.default{__construct(t){super.__construct(t)}getDefaultSettings(){const t="elementor-widget-cmsmasters-theme-add-to-cart";return{classes:{},selectors:{addToQuote:`.${t}__add-to-quote`,inputs:`.${t}__add-to-quote-inputs`,inputItem:`.${t}__add-to-quote-input-item`,input:`.${t}__add-to-quote-input`,inputOperator:`.${t}__add-to-quote-input-operator`,onlyEach:".only_each",quoteButtonWrap:`.${t}__add-to-quote-button-wrap`,quoteButton:".theme_add_to_quote",addToCart:".add_to_cart_button"}}}getDefaultElements(){const{selectors:t,classes:e}=this.getSettings();return{$addToQuote:this.findElement(t.addToQuote),$inputs:this.findElement(t.inputs),$inputItem:this.findElement(t.inputItem),$input:this.findElement(t.input),$inputOperator:this.findElement(t.inputOperator),$quoteButton:this.findElement(t.quoteButton),$addToCart:this.findElement(t.addToCart)}}bindEvents(){const{selectors:t}=this.getSettings();this.elements.$inputOperator.on("click",this.inputOperatorClick.bind(this)),"sqft"===this.elements.$addToQuote.attr("product-uom")&&(this.elements.$input.on("input",this.textInput.bind(this)),jQuery(document).on("input",this.activeInput.bind(this))),this.elements.$input.on("click focus",this.clickActiveInput.bind(this)),this.elements.$quoteButton.on("click",this.quoteButtonClick.bind(this)),this.elements.$addToCart.on("click",this.addingToCartAjax.bind(this))}onInit(){super.onInit()}quoteButtonClick(t){const{selectors:e}=this.getSettings();t.preventDefault();const n=jQuery(t.currentTarget),s=n.closest(e.quoteButtonWrap);let i=null,a=null;n.parents("ul.products").length>0?(i=n.parents("li.product").find('input[name="add-to-cart"]'),a=n.parents("li.product").find('input[name="product_id"]')):(i=n.parents(".product").find('input[name="add-to-cart"]'),a=n.parents(".product").find('input[name="product_id"]'));const o=this.elements.$addToQuote,r=n.data("wp_nonce"),d=n.data("product_id"),u=n.data("list_text"),c=o.attr("product-uom");let l=o.find(e.inputItem+'[product-uom="'+c+'"] input').val();(isNaN(l)||0===l.length)&&(l=1);const p=s.hasClass("quote_premium");let h;p?(h=new FormData,h.append("context","frontend"),h.append("action","yith_ywraq_action"),h.append("ywraq_action","add_item"),h.append("product_id",d),h.append("wp_nonce",r),h.append("yith-add-to-cart",d),h.append("quantity",l)):(h="ac",(i.length>0&&a.length>0||jQuery(".cart").length>0)&&(h=jQuery(".cart").serialize()),h+="&action=yith_ywraq_action&ywraq_action=add_item&quantity="+l+"&product_id="+d+"&_wpnonce="+r);const m=p?ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"):ywraq_frontend.ajaxurl;jQuery.ajax({type:"POST",url:m,dataType:"json",data:h,contentType:!1,processData:!1,beforeSend:function(){n.siblings(".ajax-loading").css({opacity:"1",visibility:"visible"})},complete:function(){n.siblings(".ajax-loading").css({opacity:"0",visibility:"hidden"})},success:t=>{if("true"==t.result||"exists"==t.result)if("yes"===ywraq_frontend.go_to_the_list)window.location.href=t.rqa_url;else{n.parent().hide().removeClass("show").addClass("addedd");const e=void 0===a.val()?"":"-"+a.val();s.append('<div class="yith_ywraq_add_item_browse-list'+e+' yith_ywraq_add_item_browse_message"><a href="'+t.rqa_url+'">'+u+"</a></div>")}else"false"==t.result&&s.append('<div class="yith_ywraq_add_item_response-'+a.val()+'">'+t.message+"</div>");let e=Number(jQuery(".request-quote-icon--count").text());e||(e=0),jQuery(".request-quote-icon--count").text(e+1);const i=jQuery('<div class="add-to-button-success-message fas fa-check"><span>The product has been added to your qoute list.</span><a href="/request-quote/">Open</a></div>');o.append(i),setTimeout((function(){i.fadeOut(300,(function(){jQuery(this).remove()}))}),3e3)}})}run(){const t=this,e=t.requests[0].complete;t.requests[0].complete=function(){"function"==typeof e&&e(),t.requests.shift(),t.requests.length>0&&t.run()},jQuery.ajax(this.requests[0])}addRequest(t){this.requests=[],this.requests.push(t),1===this.requests.length&&this.run()}addingToCartAjax(t){const{selectors:e}=this.getSettings();if(this.isEdit)return;const n=jQuery(t.currentTarget);if(!n.attr("data-product_id"))return!0;if(t.preventDefault(),!1===jQuery(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[n]))return jQuery(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,n]),!0;const s={},i=n.closest(e.addToQuote),a=i.attr("product-uom");let o=i.find(e.inputItem+'[product-uom="'+a+'"] input').val();(isNaN(o)||0===o.length)&&(o=1),s.quantity=o,jQuery.each(n.data(),(function(t,e){s[t]=e})),jQuery.each(n[0].dataset,(function(t,e){s[t]=e})),jQuery(document.body).trigger("adding_to_cart",[n,s]),this.addRequest({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:s,beforeSend:function(){n.find(".ajax-loading").css({opacity:"1",visibility:"visible"})},complete:function(){n.find(".ajax-loading").css({opacity:"0",visibility:"hidden"})},success:function(t){if(!t)return;if(t.error&&t.product_url)return void(window.location=t.product_url);if("yes"===wc_add_to_cart_params.cart_redirect_after_add)return void(window.location=wc_add_to_cart_params.cart_url);jQuery(document.body).trigger("added_to_cart",[t.fragments,n]);const e=jQuery('<div class="add-to-button-success-message fas fa-check"><span>The product has been added to your cart.</span><a href="/cart/">Open</a></div>');i.append(e),setTimeout((function(){e.fadeOut(300,(function(){jQuery(this).remove()}))}),3e3)},dataType:"json"})}incrementValue(t,e,n,s,i,a){if("each"===n)e+=1,t.val(e.toFixed(0));else if("yes"===s)e+=a,t.val(e.toFixed(0));else{let n=(e+=i)/i;n=n.toFixed(0)*i;const s=e-(e-n);t.val(s.toFixed(2))}}decrementValue(t,e,n,s,i,a){if("each"===n)e>=1?(e-=1,t.val(e.toFixed(0))):t.val(0);else if("yes"===s)e>a?(e-=a,t.val(e.toFixed(0))):t.val(0);else if(e>i){let n=(e-=i)/i;n=n.toFixed(0)*i;const s=e-(e-n);t.val(s.toFixed(2))}else t.val(0)}anotherInputChange(t,e,n,s,i){const{selectors:a}=this.getSettings(),o=e.attr("product-uom");let r=e.attr("product-width")*e.attr("product-height")/144;const d=(Number.isInteger(r),r),u=parseFloat(n.val()),c=Number.isInteger(i)?i:parseFloat(i);let l=d;"yes"===s&&(l=c);let p="";p="each"===o?Number.isInteger(u*l)?u*l:(u*l).toFixed(2):Math.ceil(u.toFixed(2)/l.toFixed(2)),isNaN(u)&&(p="");const h="each"===o?"sqft":"each";t.closest(a.inputs).find(a.inputItem+'[product-uom="'+h+'"]').find(a.input).val(p)}inputChange(t,e,n,s,i){const a=e.attr("product-uom");let o=e.attr("product-width")*e.attr("product-height")/144;const r=(Number.isInteger(o),o),d=parseFloat(n.val()),u=Number.isInteger(i)?i:parseFloat(i);let c="";if("sqft"===a){let t=r;"yes"===s&&(t=u),c=Math.ceil(d/t),t%1!=0?(c=Math.ceil(c)*t,isNaN(d)&&(c=""),n.val(c.toFixed(2))):(c*=t,isNaN(d)&&(c=""),n.val(c.toFixed(0)))}}inputOperatorClick(t){const{selectors:e}=this.getSettings(),n=jQuery(t.currentTarget),s=n.parent(),i=s.find(e.input),a=i.attr("pack");let o="no";"yes"===i.attr("full-packaged")&&(o="yes");let r=parseFloat(i.val())||0;const d=s.attr("product-uom");let u=parseFloat(s.attr("product-width"))*parseFloat(s.attr("product-height"))/144;const c=Number.isInteger(u)?u:parseFloat(u),l=Number.isInteger(a)?a:parseFloat(a);n.hasClass("increment")?this.incrementValue(i,r,d,o,c,l):this.decrementValue(i,r,d,o,c,l),this.anotherInputChange(n,s,i,o,a),this.activeInput()}textInput(t){const{selectors:e}=this.getSettings(),n=jQuery(t.currentTarget),s=n.parent(),i=s.find(e.input),a=i.attr("pack");let o="no";"yes"===i.attr("full-packaged")&&(o="yes"),this.anotherInputChange(n,s,i,o,a),setTimeout((()=>{this.inputChange(n,s,i,o,a)}),1e3),this.activeInput()}activeInput(){const{selectors:t}=this.getSettings();this.elements.$inputs.find(t.inputItem).each((function(){const e=jQuery(this),n=e.find(t.input);""!==n.val().trim()&&(e.addClass("active"),e.find(".decrement").removeClass("disable")),n.focus((function(){e.addClass("active")})),n.blur((function(){n.is(":focus")||""!==n.val().trim()||n.closest(t.inputs).find(t.inputItem).removeClass("active")}))}))}clickActiveInput(t){const{selectors:e}=this.getSettings(),n=jQuery(t.currentTarget),s=n.closest(e.inputs).find(e.inputItem).find(e.input);""!==n.val().trim()&&n.closest(e.inputItem).addClass("active").find(".decrement").removeClass("disable"),n.on("focus",(function(){n.closest(e.inputItem).addClass("active")})),s.on("blur",(function(){s.is(":focus")||""!==n.val().trim()||n.closest(e.inputItem).removeClass("active")}))}}e.default=ThemeAddToCart}}]);